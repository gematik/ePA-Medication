<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2207px" preserveAspectRatio="none" style="width:2802px;height:2207px;background:#FFFFFF;" version="1.1" viewBox="0 0 2802 2207" width="2802px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="220" x="1289.5" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1294.5" y="32.9951">$provide-dispensation-erp</text><ellipse cx="1688.9375" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="769" x="1304.4375" y="141.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1314.4375" y="162.4043">Validate all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1387.4375" y="162.4043">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1465.4375" y="162.4043">,</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1473.4375" y="162.4043">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="1570.4375" y="162.4043">and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1598.4375" y="162.4043">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="1746.4375" y="162.4043">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1778.4375" y="162.4043">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1903.4375" y="162.4043">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1923.4375" y="162.4043">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="2033.4375" y="162.4043">.part</text><polygon fill="#F1F1F1" points="1627.4375,195.2344,1750.4375,195.2344,1762.4375,214.4414,1750.4375,233.6484,1627.4375,233.6484,1615.4375,214.4414,1627.4375,195.2344" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1686.9375" y="205.4448"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="1627.4375" y="218.2495">Validation successfull</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1686.9375" y="231.0542"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1595.4375" y="211.8472">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1762.4375" y="211.8472">no</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="452" x="631.875" y="243.6484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="656.375" y="264.7871">Generate</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="719.375" y="264.7871">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="946.375" y="264.7871">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="641.875" y="278.7559">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="766.875" y="278.7559">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="786.875" y="278.7559">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="896.875" y="278.7559">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="86" x="930.875" y="278.7559">authoredOn</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="1020.875" y="278.7559">and the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="663.875" y="292.7246">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="788.875" y="292.7246">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="808.875" y="292.7246">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="918.875" y="292.7246">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="952.875" y="292.7246">PrescriptionId</text><polygon fill="#F1F1F1" points="613.375,325.5547,1102.375,325.5547,1114.375,357.5664,1102.375,389.5781,613.375,389.5781,601.375,357.5664,613.375,325.5547" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="855.875" y="335.7651"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="613.375" y="348.5698">Check if there is a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="721.375" y="348.5698">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="848.375" y="348.5698">with the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="897.375" y="348.5698">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1098.375" y="348.5698"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="847.375" y="361.3745">and</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="86" x="689.375" y="374.1792">the status NOT</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="779.375" y="374.1792">completed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="180" x="850.375" y="374.1792">exists in the Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="855.875" y="386.9839"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="587.375" y="354.9722">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1114.375" y="354.9722">yes</text><rect fill="#FFC0CB" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="490" x="11" y="399.5781"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="21" y="420.7168">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="84" y="420.7168">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="264" x="223" y="420.7168">(MEDICATIONSVC_PRESCRIPTION_NO_EXIST)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="313" x="28.5" y="434.6855">or (MEDICATIONSVC_PRESCRIPTION_STATUS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="345.5" y="434.6855">Output-Parameters</text><rect fill="none" height="1585.2891" style="stroke:#000000;stroke-width:1.5;" width="1689" x="511" y="399.5781"/><path d="M598,399.5781 L598,408.875 L588,418.875 L511,418.875 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="514" y="413.5732">transaction</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="572" x="1201.75" y="435.875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="1367.25" y="457.0137">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1410.25" y="457.0137">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="1558.25" y="457.0137">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="1211.75" y="470.9824">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1536.75" y="470.9824">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1759.75" y="470.9824"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="219" x="1346.25" y="484.9512">in the Medication Service to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1569.25" y="484.9512">declined</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="1203.75" y="517.7813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="1400.25" y="538.9199">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1443.25" y="538.9199">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="1525.25" y="538.9199">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="1213.75" y="552.8887">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1538.75" y="552.8887">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="1429.25" y="566.8574">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="1491.25" y="566.8574">inactive</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="406" x="1284.75" y="599.6875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="1301.25" y="620.8262">Check for Existing</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1416.25" y="620.8262">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="1513.25" y="620.8262">with TelematikId from the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1294.75" y="634.7949"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1298.75" y="634.7949">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1423.75" y="634.7949">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1443.75" y="634.7949">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1553.75" y="634.7949">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1587.75" y="634.7949">Organization</text><polygon fill="#F1F1F1" points="1424.25,667.625,1551.25,667.625,1563.25,679.625,1551.25,691.625,1424.25,691.625,1412.25,679.625,1424.25,667.625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="83" x="1424.25" y="683.4331">Organization</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="1511.25" y="683.4331">exists?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1392.25" y="677.0308">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1563.25" y="677.0308">no</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="442" x="1037.75" y="701.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1213.75" y="722.7637">&lt;&lt;Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="1208.25" y="736.7324">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1216.25" y="736.7324">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="1047.75" y="750.7012">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1055.75" y="750.7012">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1087.75" y="750.7012">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1212.75" y="750.7012">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1232.75" y="750.7012">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1342.75" y="750.7012">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1376.75" y="750.7012">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="1254.75" y="764.6699">  </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="1126.75" y="778.6387">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="1252.75" y="792.6074">...</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="434" x="1499.75" y="701.625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1671.75" y="722.7637">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1670.25" y="736.7324">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1509.75" y="750.7012">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1541.75" y="750.7012">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1666.75" y="750.7012">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1686.75" y="750.7012">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1796.75" y="750.7012">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1830.75" y="750.7012">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1714.75" y="764.6699"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="1580.75" y="778.6387">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="1710.75" y="792.6074">...</text><polygon fill="#F1F1F1" points="1487.75,811.4375,1499.75,823.4375,1487.75,835.4375,1475.75,823.4375,1487.75,811.4375" style="stroke:#181818;stroke-width:0.5;"/><rect fill="none" height="1005.5234" style="stroke:#000000;stroke-width:1.5;" width="1669" x="521" y="845.4375"/><path d="M561,845.4375 L561,854.7344 L551,864.7344 L521,864.7344 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30" x="524" y="859.4326">loop</text><polygon fill="#F1F1F1" points="1309.25,935.7031,1666.25,935.7031,1678.25,980.5195,1666.25,1025.3359,1309.25,1025.3359,1297.25,980.5195,1309.25,935.7031" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1485.75" y="945.9136"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="1358.75" y="958.7183">Check if the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="1429.75" y="958.7183">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="49" x="1563.75" y="958.7183">from the</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1309.25" y="971.5229"> </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="1313.25" y="971.5229">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="18" x="1424.25" y="971.5229">[x].</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1442.25" y="971.5229">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="121" x="1541.25" y="971.5229">.part in medication[x]</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="39" x="1366.25" y="984.3276">uses a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="1409.25" y="984.3276">Data Absent Reason Extension</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1605.25" y="984.3276">.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="1330.25" y="997.1323">This indicates that the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="1461.25" y="997.1323">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="50" x="1595.25" y="997.1323">does not</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="79" x="1412.75" y="1009.937">reference any</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="1495.75" y="1009.937">Medication</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1485.75" y="1022.7417"> </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="56" x="1030.25" y="977.9253">NOT USE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="1090.25" y="977.9253">a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="1101.25" y="977.9253">Data Absent Reason Extension</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="25" x="1678.25" y="977.9253">USE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="1707.25" y="977.9253">a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="1718.25" y="977.9253">Data Absent Reason Extension</text><rect fill="#F1F1F1" height="75.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="477" x="820" y="1035.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1056.5" y="1056.4746"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="830" y="1070.4434">Get the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="881" y="1070.4434">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="172" x="963" y="1070.4434">resource referenced by the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1139" y="1070.4434">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1283" y="1070.4434"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="889.5" y="1084.4121">from the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="946.5" y="1084.4121">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1071.5" y="1084.4121">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1091.5" y="1084.4121">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="1201.5" y="1084.4121">.part</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1056.5" y="1098.3809"> </text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="549" x="784" y="1131.2109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="794" y="1152.3496">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="878" y="1152.3496">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="144" x="1101" y="1152.3496">from the hashed Input-</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1245" y="1152.3496">Medication</text><polygon fill="#F1F1F1" points="792,1185.1797,1325,1185.1797,1337,1217.1914,1325,1249.2031,792,1249.2031,780,1217.1914,792,1185.1797" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1056.5" y="1195.3901"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="141" x="792" y="1208.1948">Verify whether there is a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71" x="937" y="1208.1948">Medication</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="1012" y="1208.1948">with the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="1061" y="1208.1948">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="55" x="1266" y="1208.1948">extension</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="1048" y="1220.9995">and</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="154" x="809" y="1233.8042">the generated hash for the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199" x="967" y="1233.8042">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="142" x="1170" y="1233.8042">in the Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1056.5" y="1246.6089"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="760" y="1214.5972">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1337" y="1214.5972">no</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="474" x="533" y="1259.2031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="46" x="543" y="1280.3418">Update</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="593" y="1280.3418">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="25" x="675" y="1280.3418">with</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="704" y="1280.3418">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="931" y="1280.3418">extenstion</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="592.5" y="1294.3105">and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="620.5" y="1294.3105">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="843.5" y="1294.3105">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="905.5" y="1294.3105">active</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="594" x="1050" y="1259.2031"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1141.5" y="1280.3418">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1225.5" y="1280.3418">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1439.5" y="1280.3418">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1060" y="1294.3105">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1185" y="1294.3105">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1205" y="1294.3105">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1315" y="1294.3105">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1349" y="1294.3105">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1427" y="1294.3105">.Id and the Input-</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1535" y="1294.3105">PrescriptionId</text><rect fill="#F1F1F1" height="141.75" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="571" x="1061.5" y="1327.1406"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1302" y="1348.2793">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1308" y="1362.248">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1147.5" y="1376.2168">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1179.5" y="1376.2168">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1304.5" y="1376.2168">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1324.5" y="1376.2168">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1434.5" y="1376.2168">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1468.5" y="1376.2168">Medication</text><line style="stroke:#181818;stroke-width:1.0;" x1="1061.5" x2="1632.5" y1="1384.0469" y2="1384.0469"/><line style="stroke:#181818;stroke-width:1.0;" x1="1061.5" x2="1632.5" y1="1386.0469" y2="1386.0469"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="1078" y="1400.1855">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="1138" y="1400.1855">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="259" x="1357" y="1400.1855">] = Value(EPAMedicationUniqueIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="1087.5" y="1414.1543">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1147.5" y="1414.1543">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="249" x="1357.5" y="1414.1543">] = Value(RxOriginatorProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="1071.5" y="1428.123">extension[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1137.5" y="1428.123">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="1360.5" y="1428.123">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="1297" y="1442.0918">status =</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="1355" y="1442.0918">active</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="1341" y="1456.0605">...</text><polygon fill="#F1F1F1" points="1058.5,1474.8906,1070.5,1486.8906,1058.5,1498.8906,1046.5,1486.8906,1058.5,1474.8906" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="486" x="1674" y="1035.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="65" x="1684" y="1056.4746">Use of the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1753" y="1056.4746">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="1835" y="1056.4746">instance referenced by the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="2009" y="1056.4746">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="2146" y="1056.4746"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1751.5" y="1070.4434">instance with the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1863.5" y="1070.4434">RxPrescriptionProcessIdentifier</text><polygon fill="#F1F1F1" points="1487.75,1504.8906,1499.75,1516.8906,1487.75,1528.8906,1475.75,1516.8906,1487.75,1504.8906" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="660" x="1157.75" y="1548.8906"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1282.25" y="1570.0293">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1366.25" y="1570.0293">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1580.25" y="1570.0293">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1167.75" y="1583.998">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1292.75" y="1583.998">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1312.75" y="1583.998">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1422.75" y="1583.998">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1456.75" y="1583.998">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1600.75" y="1583.998">.Id and the Input-</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1708.75" y="1583.998">PrescriptionId</text><rect fill="#F1F1F1" height="155.7188" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="571" x="1202.25" y="1616.8281"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1442.75" y="1637.9668">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1415.75" y="1651.9355">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1255.25" y="1665.9043">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1287.25" y="1665.9043">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1412.25" y="1665.9043">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1432.25" y="1665.9043">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1542.25" y="1665.9043">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1576.25" y="1665.9043">MedicationDispense</text><line style="stroke:#181818;stroke-width:1.0;" x1="1202.25" x2="1773.25" y1="1673.7344" y2="1673.7344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1202.25" x2="1773.25" y1="1675.7344" y2="1675.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="1228.25" y="1689.873">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="1288.25" y="1689.873">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="249" x="1498.25" y="1689.873">] = Value(RxOriginatorProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="1212.25" y="1703.8418">extension[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1278.25" y="1703.8418">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="1501.25" y="1703.8418">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="220" x="1336.25" y="1717.8105">medicationReference = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1556.25" y="1717.8105">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1634.25" y="1717.8105">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="186" x="1345.75" y="1731.7793">performer.actor = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1531.75" y="1731.7793">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1624.75" y="1731.7793">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="231" x="1301.25" y="1745.748">authorizingPrescription = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="1532.25" y="1745.748">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1669.25" y="1745.748">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="1421.75" y="1759.7168">status =</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="74" x="1479.75" y="1759.7168">completed</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="627" x="1174.25" y="881.7344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="1188.25" y="902.873">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="1245.25" y="902.873">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="103" x="1393.25" y="902.873">from the current</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1500.25" y="902.873">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1610.25" y="902.873"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1614.25" y="902.873">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="48" x="1743.25" y="902.873">part list</text><polygon fill="#F1F1F1" points="1244.25,1792.5469,1731.25,1792.5469,1743.25,1811.7539,1731.25,1830.9609,1244.25,1830.9609,1232.25,1811.7539,1244.25,1792.5469" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1491.75" y="1841.1714">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1727.25" y="1802.7573"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="1244.25" y="1815.562">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="1283.25" y="1815.562">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="10" x="1417.25" y="1815.562">in</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="1431.25" y="1815.562">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1542.25" y="1815.562"> </text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1546.25" y="1815.562">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="82" x="1649.25" y="1815.562">part list exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="1727.25" y="1828.3667"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1743.25" y="1809.1597">yes</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="438" x="1268.75" y="1870.9609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="1278.75" y="1892.0996">Set</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="1303.75" y="1892.0996">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="25" x="1444.75" y="1892.0996">with</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="1473.75" y="1892.0996">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="1419.75" y="1906.0684">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="74" x="1481.75" y="1906.0684">completed</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="692" x="1141.75" y="1938.8984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="1151.75" y="1960.0371">Add information</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1254.75" y="1960.0371">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="288" x="1393.75" y="1960.0371">(MEDICATIONSVC_OPERATION_SUCCESS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1685.75" y="1960.0371">Output-Parameters</text><polygon fill="#F1F1F1" points="857.875,1990.8672,869.875,2002.8672,857.875,2014.8672,845.875,2002.8672,857.875,1990.8672" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="552" x="2210" y="243.6484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="2220" y="264.7871">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="2283" y="264.7871">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="188" x="2422" y="264.7871">(NO_VALID_STRUCTURE) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="2614" y="264.7871">Output-Parameters</text><polygon fill="#F1F1F1" points="1688.9375,2020.8672,1700.9375,2032.8672,1688.9375,2044.8672,1676.9375,2032.8672,1688.9375,2020.8672" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="373" x="1502.4375" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="1512.4375" y="108.4355">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="1569.4375" y="108.4355">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="1683.4375" y="108.4355">from the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1740.4375" y="108.4355">Input-Parameters</text><polygon fill="#F1F1F1" points="1594.9375,2064.8672,1782.9375,2064.8672,1794.9375,2076.8672,1782.9375,2088.8672,1594.9375,2088.8672,1582.9375,2076.8672,1594.9375,2064.8672" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1692.9375" y="2099.0776">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="1594.9375" y="2080.6753">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="1633.9375" y="2080.6753">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1748.9375" y="2080.6753">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1794.9375" y="2074.2729">yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="1581.9375" y="2120.5776"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="1591.9375" y="2141.7163">Return "</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1642.9375" y="2141.7163">Output-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1780.9375" y="2141.7163">"</text><ellipse cx="1688.9375" cy="2185.5464" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1688.9375" cy="2185.5464" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="497.7813" y2="517.7813"/><polygon fill="#181818" points="1483.75,507.7813,1487.75,517.7813,1491.75,507.7813,1487.75,511.7813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="579.6875" y2="599.6875"/><polygon fill="#181818" points="1483.75,589.6875,1487.75,599.6875,1491.75,589.6875,1487.75,593.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1412.25" x2="1258.75" y1="679.625" y2="679.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="1258.75" x2="1258.75" y1="679.625" y2="701.625"/><polygon fill="#181818" points="1254.75,691.625,1258.75,701.625,1262.75,691.625,1258.75,695.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1563.25" x2="1716.75" y1="679.625" y2="679.625"/><line style="stroke:#181818;stroke-width:1.0;" x1="1716.75" x2="1716.75" y1="679.625" y2="701.625"/><polygon fill="#181818" points="1712.75,691.625,1716.75,701.625,1720.75,691.625,1716.75,695.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1258.75" x2="1258.75" y1="805.4375" y2="823.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1258.75" x2="1475.75" y1="823.4375" y2="823.4375"/><polygon fill="#181818" points="1465.75,819.4375,1475.75,823.4375,1465.75,827.4375,1469.75,823.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1716.75" x2="1716.75" y1="805.4375" y2="823.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1716.75" x2="1499.75" y1="823.4375" y2="823.4375"/><polygon fill="#181818" points="1509.75,819.4375,1499.75,823.4375,1509.75,827.4375,1505.75,823.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="647.625" y2="667.625"/><polygon fill="#181818" points="1483.75,657.625,1487.75,667.625,1491.75,657.625,1487.75,661.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1058.5" x2="1058.5" y1="1111.2109" y2="1131.2109"/><polygon fill="#181818" points="1054.5,1121.2109,1058.5,1131.2109,1062.5,1121.2109,1058.5,1125.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1347" y1="1307.1406" y2="1327.1406"/><polygon fill="#181818" points="1343,1317.1406,1347,1327.1406,1351,1317.1406,1347,1321.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="780" x2="770" y1="1217.1914" y2="1217.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="770" x2="770" y1="1217.1914" y2="1259.2031"/><polygon fill="#181818" points="766,1249.2031,770,1259.2031,774,1249.2031,770,1253.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1337" x2="1347" y1="1217.1914" y2="1217.1914"/><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1347" y1="1217.1914" y2="1259.2031"/><polygon fill="#181818" points="1343,1249.2031,1347,1259.2031,1351,1249.2031,1347,1253.2031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="770" x2="770" y1="1307.1406" y2="1486.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="770" x2="1046.5" y1="1486.8906" y2="1486.8906"/><polygon fill="#181818" points="1036.5,1482.8906,1046.5,1486.8906,1036.5,1490.8906,1040.5,1486.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1347" y1="1468.8906" y2="1486.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="1347" x2="1070.5" y1="1486.8906" y2="1486.8906"/><polygon fill="#181818" points="1080.5,1482.8906,1070.5,1486.8906,1080.5,1490.8906,1076.5,1486.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1058.5" x2="1058.5" y1="1165.1797" y2="1185.1797"/><polygon fill="#181818" points="1054.5,1175.1797,1058.5,1185.1797,1062.5,1175.1797,1058.5,1179.1797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1297.25" x2="1058.5" y1="980.5195" y2="980.5195"/><line style="stroke:#181818;stroke-width:1.0;" x1="1058.5" x2="1058.5" y1="980.5195" y2="1035.3359"/><polygon fill="#181818" points="1054.5,1025.3359,1058.5,1035.3359,1062.5,1025.3359,1058.5,1029.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1678.25" x2="1917" y1="980.5195" y2="980.5195"/><line style="stroke:#181818;stroke-width:1.0;" x1="1917" x2="1917" y1="980.5195" y2="1035.3359"/><polygon fill="#181818" points="1913,1025.3359,1917,1035.3359,1921,1025.3359,1917,1029.3359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1058.5" x2="1058.5" y1="1498.8906" y2="1516.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="1058.5" x2="1475.75" y1="1516.8906" y2="1516.8906"/><polygon fill="#181818" points="1465.75,1512.8906,1475.75,1516.8906,1465.75,1520.8906,1469.75,1516.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1917" x2="1917" y1="1083.2734" y2="1516.8906"/><line style="stroke:#181818;stroke-width:1.0;" x1="1917" x2="1499.75" y1="1516.8906" y2="1516.8906"/><polygon fill="#181818" points="1509.75,1512.8906,1499.75,1516.8906,1509.75,1520.8906,1505.75,1516.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1528.8906" y2="1548.8906"/><polygon fill="#181818" points="1483.75,1538.8906,1487.75,1548.8906,1491.75,1538.8906,1487.75,1542.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1596.8281" y2="1616.8281"/><polygon fill="#181818" points="1483.75,1606.8281,1487.75,1616.8281,1491.75,1606.8281,1487.75,1610.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="915.7031" y2="935.7031"/><polygon fill="#181818" points="1483.75,925.7031,1487.75,935.7031,1491.75,925.7031,1487.75,929.7031" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1743.25" x2="2174" y1="1811.7539" y2="1811.7539"/><polygon fill="#181818" points="2170,1357.7363,2174,1347.7363,2178,1357.7363,2174,1353.7363" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2174" x2="2174" y1="898.7188" y2="1811.7539"/><line style="stroke:#181818;stroke-width:1.0;" x1="2174" x2="1801.25" y1="898.7188" y2="898.7188"/><polygon fill="#181818" points="1811.25,894.7188,1801.25,898.7188,1811.25,902.7188,1807.25,898.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1772.5469" y2="1792.5469"/><polygon fill="#181818" points="1483.75,1782.5469,1487.75,1792.5469,1491.75,1782.5469,1487.75,1786.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="835.4375" y2="881.7344"/><polygon fill="#181818" points="1483.75,871.7344,1487.75,881.7344,1491.75,871.7344,1487.75,875.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1830.9609" y2="1870.9609"/><polygon fill="#181818" points="1483.75,1860.9609,1487.75,1870.9609,1491.75,1860.9609,1487.75,1864.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1918.8984" y2="1938.8984"/><polygon fill="#181818" points="1483.75,1928.8984,1487.75,1938.8984,1491.75,1928.8984,1487.75,1932.8984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="601.375" x2="256" y1="357.5664" y2="357.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="256" x2="256" y1="357.5664" y2="399.5781"/><polygon fill="#181818" points="252,389.5781,256,399.5781,260,389.5781,256,393.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1114.375" x2="1487.75" y1="357.5664" y2="357.5664"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="357.5664" y2="435.875"/><polygon fill="#181818" points="1483.75,425.875,1487.75,435.875,1491.75,425.875,1487.75,429.875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="256" x2="256" y1="447.5156" y2="2002.8672"/><line style="stroke:#181818;stroke-width:1.0;" x1="256" x2="845.875" y1="2002.8672" y2="2002.8672"/><polygon fill="#181818" points="835.875,1998.8672,845.875,2002.8672,835.875,2006.8672,839.875,2002.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="1487.75" y1="1972.8672" y2="2002.8672"/><line style="stroke:#181818;stroke-width:1.0;" x1="1487.75" x2="869.875" y1="2002.8672" y2="2002.8672"/><polygon fill="#181818" points="879.875,1998.8672,869.875,2002.8672,879.875,2006.8672,875.875,2002.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="857.875" x2="857.875" y1="305.5547" y2="325.5547"/><polygon fill="#181818" points="853.875,315.5547,857.875,325.5547,861.875,315.5547,857.875,319.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1615.4375" x2="857.875" y1="214.4414" y2="214.4414"/><line style="stroke:#181818;stroke-width:1.0;" x1="857.875" x2="857.875" y1="214.4414" y2="243.6484"/><polygon fill="#181818" points="853.875,233.6484,857.875,243.6484,861.875,233.6484,857.875,237.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1762.4375" x2="2486" y1="214.4414" y2="214.4414"/><line style="stroke:#181818;stroke-width:1.0;" x1="2486" x2="2486" y1="214.4414" y2="243.6484"/><polygon fill="#181818" points="2482,233.6484,2486,243.6484,2490,233.6484,2486,237.6484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="857.875" x2="857.875" y1="2014.8672" y2="2032.8672"/><line style="stroke:#181818;stroke-width:1.0;" x1="857.875" x2="1676.9375" y1="2032.8672" y2="2032.8672"/><polygon fill="#181818" points="1666.9375,2028.8672,1676.9375,2032.8672,1666.9375,2036.8672,1670.9375,2032.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2486" x2="2486" y1="277.6172" y2="2032.8672"/><line style="stroke:#181818;stroke-width:1.0;" x1="2486" x2="1700.9375" y1="2032.8672" y2="2032.8672"/><polygon fill="#181818" points="1710.9375,2028.8672,1700.9375,2032.8672,1710.9375,2036.8672,1706.9375,2032.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="175.2344" y2="195.2344"/><polygon fill="#181818" points="1684.9375,185.2344,1688.9375,195.2344,1692.9375,185.2344,1688.9375,189.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="121.2656" y2="141.2656"/><polygon fill="#181818" points="1684.9375,131.2656,1688.9375,141.2656,1692.9375,131.2656,1688.9375,135.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1794.9375" x2="2776" y1="2076.8672" y2="2076.8672"/><polygon fill="#181818" points="2772,1107.0742,2776,1097.0742,2780,1107.0742,2776,1103.0742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2776" x2="2776" y1="104.2813" y2="2076.8672"/><line style="stroke:#181818;stroke-width:1.0;" x1="2776" x2="1875.4375" y1="104.2813" y2="104.2813"/><polygon fill="#181818" points="1885.4375,100.2813,1875.4375,104.2813,1885.4375,108.2813,1881.4375,104.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="2044.8672" y2="2064.8672"/><polygon fill="#181818" points="1684.9375,2054.8672,1688.9375,2064.8672,1692.9375,2054.8672,1688.9375,2058.8672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="1684.9375,77.2969,1688.9375,87.2969,1692.9375,77.2969,1688.9375,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="2088.8672" y2="2120.5776"/><polygon fill="#181818" points="1684.9375,2110.5776,1688.9375,2120.5776,1692.9375,2110.5776,1688.9375,2114.5776" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1688.9375" x2="1688.9375" y1="2154.5464" y2="2174.5464"/><polygon fill="#181818" points="1684.9375,2164.5464,1688.9375,2174.5464,1692.9375,2164.5464,1688.9375,2168.5464" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[8a6852f1b65521bb8473bfb105635ea1]
@startuml operation.provide-dispensation-erp
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $provide-dispensation-erp

start

  repeat:Get next <b>RxDispensation</b> from the <b>Input-Parameters</b>;
  
    :Validate all <b>Medication</b>, <b>Organization</b> and <b>MedicationDispense</b> from <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part;

    if (\rValidation successfull\r) then (yes)
      
      :Generate <b>RxPrescriptionProcessIdentifier</b> from the values of 
      <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>authoredOn</b> and the 
      <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>PrescriptionId</b>;


      if(\rCheck if there is a <b>MedicationRequest</b> with the <b>RxPrescriptionProcessIdentifier</b> \n and \n the status NOT <b>completed</b> exists in the Medication Service\r) then (no)
        
        #Pink:Add error <b>OperationOutcome</b> (MEDICATIONSVC_PRESCRIPTION_NO_EXIST) \nor (MEDICATIONSVC_PRESCRIPTION_STATUS) to the <b>Output-Parameters</b>; 
      
      else (yes)

        partition transaction {
        
          :Set all <b>MedicationDispense</b> with the 
          extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b> 
          in the Medication Service to Status <b>declined</b>;

          :Set all <b>Medication</b> with the 
          extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
          to Status <b>inactive</b>;

          :Check for Existing <b>Organization</b> with TelematikId from the \n <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>Organization</b>;

          if (<b>Organization</b> exists?) then (yes)

            :<<Update >> 
            <b>Organization</b>
            <i>from <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>Organization</b></i>
            
            identifier[TelematikID] = Value(TelematikID)
          ...;

          else (no)

            :<< Create >> 
            <b>Organization</b>
            <i>from <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>Organization</b></i>
           
            identifier[TelematikID] = Value(TelematikID)
            ...;

          endif

          partition loop {
            
            repeat: Get next <b>MedicationDispense</b> from the current <b>RxDispensation</b> <b>Input-Parameters</b> part list;
            
            If(\rCheck if the <b>MedicationDispense</b> from the \n <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part in medication[x] \n uses a <b>Data Absent Reason Extension</b>. \n This indicates that the <b>MedicationDispense</b> does not \n reference any <b>Medication</b>\r) then (<b>NOT USE</b> a <b>Data Absent Reason Extension</b>)

              :\rGet the <b>Medication</b> resource referenced by the <b>MedicationDispense</b> \n from the <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part\r;

              :Generate for <b>EPAMedicationUniqueIdentifier</b> from the hashed Input-<b>Medication</b>;
              
              If(\rVerify whether there is a <b>Medication</b> with the <b>RxPrescriptionProcessIdentifier</b> extension \nand\n the generated hash for the <b>EPAMedicationUniqueIdentifier</b> in the Medication Service\r) then (yes)
                
                :Update <b>Medication</b> with <b>RxPrescriptionProcessIdentifier</b> extenstion
                and <b>EPAMedicationUniqueIdentifier</b> to Status <b>active</b>;

              else (no)

                :Generate for <b>RxOriginatorProcessIdentifier</b> from the values of 
                <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>Medication</b>.Id and the Input-<b>PrescriptionId</b>;

                :<< Create >> 
                <b>Medication</b>
                <i>from <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>Medication</b></i>
                ====
                identifier[<b>EPAMedicationUniqueIdentifier</b>] = Value(EPAMedicationUniqueIdentifier)
                identifier[<b>RxOriginatorProcessIdentifier</b>] = Value(RxOriginatorProcessIdentifier)
                extension[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
                status = <b>active</b>
                ...;

              endif

            else (<b>USE</b> a <b>Data Absent Reason Extension</b>)

              :Use of the <b>Medication</b> instance referenced by the <b>MedicationRequest</b> \n instance with the <b>RxPrescriptionProcessIdentifier</b>;

            endif

            :Generate for <b>RxOriginatorProcessIdentifier</b> from the values of 
            <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>MedicationDispense</b>.Id and the Input-<b>PrescriptionId</b>;

            :<< Create >>
            <b>MedicationDispense</b>
            <i>from <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>MedicationDispense</b></i>
            =====
            identifier[<b>RxOriginatorProcessIdentifier</b>] = Value(RxOriginatorProcessIdentifier)
            extension[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
            medicationReference = Reference(<b>Medication</b>)
            performer.actor = Reference(<b>Organization</b>)
            authorizingPrescription = Reference(<b>MedicationRequest</b>)
            status = <b>completed</b>;

            repeat while (\rIf next <b>MedicationDispense</b> in <b>Input-Parameters</b> <b>RxDispensation</b> part list exists\r) is (yes) not (no)
          }
          
          :Set <b>MedicationRequest</b> with <b>RxPrescriptionProcessIdentifier</b> 
          to Status <b>completed</b>;

          #PaleGreen:Add information <b>OperationOutcome</b> (MEDICATIONSVC_OPERATION_SUCCESS) to the <b>Output-Parameters</b>;
     
        }
      endif

    else (no)
      
      #Pink:Add error <b>OperationOutcome</b> (NO_VALID_STRUCTURE) to the <b>Output-Parameters</b>;
    
    endif
  
  repeat while (If next <b>Input-Parameters</b> exists) is (yes) not (no)

:Return "<b>Output-Parameters</b>";
stop    
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>