<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="792px" preserveAspectRatio="none" style="width:1584px;height:792px;background:#FFFFFF;" version="1.1" viewBox="0 0 1584 792" width="1584px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="211" x="685.25" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="201" x="690.25" y="32.9951">$cancel-dispensation-erp</text><ellipse cx="763.5" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="452" x="537.5" y="141.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="562" y="162.4043">Generate</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="625" y="162.4043">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="852" y="162.4043">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="547.5" y="176.373">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="672.5" y="176.373">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="692.5" y="176.373">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="802.5" y="176.373">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="86" x="836.5" y="176.373">authoredOn</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="926.5" y="176.373">and the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="569.5" y="190.3418">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="694.5" y="190.3418">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="714.5" y="190.3418">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="824.5" y="190.3418">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="858.5" y="190.3418">PrescriptionId</text><polygon fill="#F1F1F1" points="389,223.1719,1138,223.1719,1150,242.3789,1138,261.5859,389,261.5859,377,242.3789,389,223.1719" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="761.5" y="233.3823"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="165" x="389" y="246.187">Check if there is at least one</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="558" y="246.187">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="696" y="246.187">with the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="745" y="246.187">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="950" y="246.187">already in the Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="761.5" y="258.9917"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="357" y="239.7847">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1150" y="239.7847">no</text><rect fill="none" height="327.9844" style="stroke:#000000;stroke-width:1.5;" width="712" x="11" y="271.5859"/><path d="M98,271.5859 L98,280.8828 L88,290.8828 L11,290.8828 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="14" y="285.5811">transaction</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="83" y="307.8828"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="246.5" y="329.0215">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="289.5" y="329.0215">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="437.5" y="329.0215">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="93" y="342.9902">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="418" y="342.9902">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="302.5" y="356.959">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="67" x="364.5" y="356.959">cancelled</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="83" y="389.7891"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="279.5" y="410.9277">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="322.5" y="410.9277">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="404.5" y="410.9277">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="93" y="424.8965">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="418" y="424.8965">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="308.5" y="438.8652">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="370.5" y="438.8652">inactive</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="562" x="86" y="471.6953"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="259" y="492.834">Set</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="284" y="492.834">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="425" y="492.834">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="315" x="96" y="506.8027">identifier[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="415" y="506.8027">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="315" y="520.7715">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="377" y="520.7715">active</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="692" x="21" y="553.6016"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="31" y="574.7402">Add information</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="134" y="574.7402">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="288" x="273" y="574.7402">(MEDICATIONSVC_OPERATION_SUCCESS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="565" y="574.7402">Output-Parameters</text><rect fill="#FFC0CB" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="769" x="775.5" y="271.5859"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="785.5" y="292.7246">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="848.5" y="292.7246">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="543" x="987.5" y="292.7246">(MEDICATIONSVC_DISPENSATION_NO_EXIST) or (MEDICATIONSVC_DISPENSATION_STATUS)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="38" x="1072" y="306.6934">to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1114" y="306.6934">Output-Parameters</text><polygon fill="#F1F1F1" points="763.5,605.5703,775.5,617.5703,763.5,629.5703,751.5,617.5703,763.5,605.5703" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="373" x="577" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="587" y="108.4355">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="644" y="108.4355">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="758" y="108.4355">from the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="815" y="108.4355">Input-Parameters</text><polygon fill="#F1F1F1" points="669.5,649.5703,857.5,649.5703,869.5,661.5703,857.5,673.5703,669.5,673.5703,657.5,661.5703,669.5,649.5703" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="767.5" y="683.7808">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="669.5" y="665.3784">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="708.5" y="665.3784">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="823.5" y="665.3784">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="869.5" y="658.9761">yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="656.5" y="705.2808"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="666.5" y="726.4194">Return "</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="717.5" y="726.4194">Output-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="855.5" y="726.4194">"</text><ellipse cx="763.5" cy="770.2495" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="763.5" cy="770.2495" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="367" y1="369.7891" y2="389.7891"/><polygon fill="#181818" points="363,379.7891,367,389.7891,371,379.7891,367,383.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="367" y1="451.6953" y2="471.6953"/><polygon fill="#181818" points="363,461.6953,367,471.6953,371,461.6953,367,465.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="367" y1="533.6016" y2="553.6016"/><polygon fill="#181818" points="363,543.6016,367,553.6016,371,543.6016,367,547.6016" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="377" x2="367" y1="242.3789" y2="242.3789"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="367" y1="242.3789" y2="307.8828"/><polygon fill="#181818" points="363,297.8828,367,307.8828,371,297.8828,367,301.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1150" x2="1160" y1="242.3789" y2="242.3789"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="1160" y1="242.3789" y2="271.5859"/><polygon fill="#181818" points="1156,261.5859,1160,271.5859,1164,261.5859,1160,265.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="367" y1="587.5703" y2="617.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="367" x2="751.5" y1="617.5703" y2="617.5703"/><polygon fill="#181818" points="741.5,613.5703,751.5,617.5703,741.5,621.5703,745.5,617.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="1160" y1="319.5234" y2="617.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="1160" x2="775.5" y1="617.5703" y2="617.5703"/><polygon fill="#181818" points="785.5,613.5703,775.5,617.5703,785.5,621.5703,781.5,617.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="203.1719" y2="223.1719"/><polygon fill="#181818" points="759.5,213.1719,763.5,223.1719,767.5,213.1719,763.5,217.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="121.2656" y2="141.2656"/><polygon fill="#181818" points="759.5,131.2656,763.5,141.2656,767.5,131.2656,763.5,135.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="869.5" x2="1558.5" y1="661.5703" y2="661.5703"/><polygon fill="#181818" points="1554.5,396.9258,1558.5,386.9258,1562.5,396.9258,1558.5,392.9258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1558.5" x2="1558.5" y1="104.2813" y2="661.5703"/><line style="stroke:#181818;stroke-width:1.0;" x1="1558.5" x2="950" y1="104.2813" y2="104.2813"/><polygon fill="#181818" points="960,100.2813,950,104.2813,960,108.2813,956,104.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="629.5703" y2="649.5703"/><polygon fill="#181818" points="759.5,639.5703,763.5,649.5703,767.5,639.5703,763.5,643.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="759.5,77.2969,763.5,87.2969,767.5,77.2969,763.5,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="673.5703" y2="705.2808"/><polygon fill="#181818" points="759.5,695.2808,763.5,705.2808,767.5,695.2808,763.5,699.2808" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="763.5" x2="763.5" y1="739.2495" y2="759.2495"/><polygon fill="#181818" points="759.5,749.2495,763.5,759.2495,767.5,749.2495,763.5,753.2495" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[1e7a4dba3b78557fb4613f1ee249adf7]
@startuml operation.cancel-dispensation-erp
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $cancel-dispensation-erp

start


  repeat:Get next <b>RxDispensation</b> from the <b>Input-Parameters</b>;

    :Generate <b>RxPrescriptionProcessIdentifier</b> from the values of 
    <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>authoredOn</b> and the 
    <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>PrescriptionId</b>;

    if(\rCheck if there is at least one <b>MedicationDispense </b> with the <b>RxPrescriptionProcessIdentifier</b> already in the Medication Service\r) then (yes)

      partition transaction {

        :Set all <b>MedicationDispense</b> with the 
        extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>cancelled</b>;

        :Set all <b>Medication</b> with the 
        extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>inactive</b>;

        :Set <b>MedicationRequest</b> with the 
        identifier[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>active</b>;

        #PaleGreen:Add information <b>OperationOutcome</b> (MEDICATIONSVC_OPERATION_SUCCESS) to the <b>Output-Parameters</b>;

      }

    else (no)

      #Pink:Add error <b>OperationOutcome</b> (MEDICATIONSVC_DISPENSATION_NO_EXIST) or (MEDICATIONSVC_DISPENSATION_STATUS) \n to the <b>Output-Parameters</b>; 

    endif

  repeat while (If next <b>Input-Parameters</b> exists) is (yes) not (no)

:Return "<b>Output-Parameters</b>";
stop
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>