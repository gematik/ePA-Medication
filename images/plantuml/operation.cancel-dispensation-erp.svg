<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="777px" preserveAspectRatio="none" style="width:1284px;height:777px;background:#FFFFFF;" version="1.1" viewBox="0 0 1284 777" width="1284px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="211" x="535.25" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="201" x="540.25" y="32.9951">$cancel-dispensation-erp</text><ellipse cx="701.5" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="452" x="475.5" y="141.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="500" y="162.4043">Generate</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="563" y="162.4043">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="790" y="162.4043">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="485.5" y="176.373">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="610.5" y="176.373">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="630.5" y="176.373">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="740.5" y="176.373">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="86" x="774.5" y="176.373">authoredOn</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="864.5" y="176.373">and the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="510.5" y="190.3418">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="635.5" y="190.3418">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="655.5" y="190.3418">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="765.5" y="190.3418">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="799.5" y="190.3418">PresciptionId</text><polygon fill="#F1F1F1" points="327,223.1719,1076,223.1719,1088,235.1719,1076,247.1719,327,247.1719,315,235.1719,327,223.1719" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="165" x="327" y="238.98">Check if there is at least one</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="496" y="238.98">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="634" y="238.98">with the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="683" y="238.98">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="888" y="238.98">already in the Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="295" y="232.5776">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1088" y="232.5776">no</text><rect fill="none" height="327.9844" style="stroke:#000000;stroke-width:1.5;" width="588" x="11" y="257.1719"/><path d="M98,257.1719 L98,266.4688 L88,276.4688 L11,276.4688 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="14" y="271.167">transaction</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="21" y="293.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="184.5" y="314.6074">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="227.5" y="314.6074">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="375.5" y="314.6074">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="31" y="328.5762">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="356" y="328.5762">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="240.5" y="342.5449">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="67" x="302.5" y="342.5449">cancelled</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="21" y="375.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="217.5" y="396.5137">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="260.5" y="396.5137">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="342.5" y="396.5137">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="31" y="410.4824">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="356" y="410.4824">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="246.5" y="424.4512">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="308.5" y="424.4512">inactive</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="562" x="24" y="457.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="197" y="478.4199">Set</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="222" y="478.4199">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="363" y="478.4199">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="315" x="34" y="492.3887">identifier[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="353" y="492.3887">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="253" y="506.3574">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="315" y="506.3574">active</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="513" x="48.5" y="539.1875"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="58.5" y="560.3262">Add information</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="161.5" y="560.3262">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="109" x="300.5" y="560.3262">(SUCCESS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="413.5" y="560.3262">Output-Parameters</text><rect fill="#FFC0CB" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="293" x="951.5" y="257.1719"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="961.5" y="278.3105">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1024.5" y="278.3105">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="67" x="1163.5" y="278.3105">(NO_EXIST)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="38" x="1010" y="292.2793">to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1052" y="292.2793">Output-Parameters</text><polygon fill="#F1F1F1" points="701.5,591.1563,713.5,603.1563,701.5,615.1563,689.5,603.1563,701.5,591.1563" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="373" x="515" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="525" y="108.4355">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="582" y="108.4355">RxDispensation</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="696" y="108.4355">from the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="753" y="108.4355">Input-Parameters</text><polygon fill="#F1F1F1" points="607.5,635.1563,795.5,635.1563,807.5,647.1563,795.5,659.1563,607.5,659.1563,595.5,647.1563,607.5,635.1563" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="705.5" y="669.3667">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="607.5" y="650.9644">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="646.5" y="650.9644">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="761.5" y="650.9644">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="807.5" y="644.562">yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="594.5" y="690.8667"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="604.5" y="712.0054">Return "</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="655.5" y="712.0054">Output-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="793.5" y="712.0054">"</text><ellipse cx="701.5" cy="755.8354" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="701.5" cy="755.8354" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="305" y1="355.375" y2="375.375"/><polygon fill="#181818" points="301,365.375,305,375.375,309,365.375,305,369.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="305" y1="437.2813" y2="457.2813"/><polygon fill="#181818" points="301,447.2813,305,457.2813,309,447.2813,305,451.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="305" y1="519.1875" y2="539.1875"/><polygon fill="#181818" points="301,529.1875,305,539.1875,309,529.1875,305,533.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="315" x2="305" y1="235.1719" y2="235.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="305" y1="235.1719" y2="293.4688"/><polygon fill="#181818" points="301,283.4688,305,293.4688,309,283.4688,305,287.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1088" x2="1098" y1="235.1719" y2="235.1719"/><line style="stroke:#181818;stroke-width:1.0;" x1="1098" x2="1098" y1="235.1719" y2="257.1719"/><polygon fill="#181818" points="1094,247.1719,1098,257.1719,1102,247.1719,1098,251.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="305" y1="573.1563" y2="603.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="305" x2="689.5" y1="603.1563" y2="603.1563"/><polygon fill="#181818" points="679.5,599.1563,689.5,603.1563,679.5,607.1563,683.5,603.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1098" x2="1098" y1="305.1094" y2="603.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1098" x2="713.5" y1="603.1563" y2="603.1563"/><polygon fill="#181818" points="723.5,599.1563,713.5,603.1563,723.5,607.1563,719.5,603.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="203.1719" y2="223.1719"/><polygon fill="#181818" points="697.5,213.1719,701.5,223.1719,705.5,213.1719,701.5,217.1719" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="121.2656" y2="141.2656"/><polygon fill="#181818" points="697.5,131.2656,701.5,141.2656,705.5,131.2656,701.5,135.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="807.5" x2="1258.5" y1="647.1563" y2="647.1563"/><polygon fill="#181818" points="1254.5,389.7188,1258.5,379.7188,1262.5,389.7188,1258.5,385.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1258.5" x2="1258.5" y1="104.2813" y2="647.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1258.5" x2="888" y1="104.2813" y2="104.2813"/><polygon fill="#181818" points="898,100.2813,888,104.2813,898,108.2813,894,104.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="615.1563" y2="635.1563"/><polygon fill="#181818" points="697.5,625.1563,701.5,635.1563,705.5,625.1563,701.5,629.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="697.5,77.2969,701.5,87.2969,705.5,77.2969,701.5,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="659.1563" y2="690.8667"/><polygon fill="#181818" points="697.5,680.8667,701.5,690.8667,705.5,680.8667,701.5,684.8667" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="701.5" x2="701.5" y1="724.8354" y2="744.8354"/><polygon fill="#181818" points="697.5,734.8354,701.5,744.8354,705.5,734.8354,701.5,738.8354" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[69a239227d9225ed7af81d0b93a53aa4]
@startuml operation.cancel-dispensation-erp
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $cancel-dispensation-erp

start


  repeat:Get next <b>RxDispensation</b> from the <b>Input-Parameters</b>;

    :Generate <b>RxPrescriptionProcessIdentifier</b> from the values of 
    <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>authoredOn</b> and the 
    <b>Input-Parameters</b>[x].<b>RxDispensation</b>.part.<b>PresciptionId</b>;

    if(Check if there is at least one <b>MedicationDispense </b> with the <b>RxPrescriptionProcessIdentifier</b> already in the Medication Service) then (yes)

      partition transaction {

        :Set all <b>MedicationDispense</b> with the 
        extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>cancelled</b>;

        :Set all <b>Medication</b> with the 
        extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>inactive</b>;

        :Set <b>MedicationRequest</b> with the 
        identifier[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
        to Status <b>active</b>;

        #PaleGreen:Add information <b>OperationOutcome</b> (SUCCESS) to the <b>Output-Parameters</b>;

      }

    else (no)

      #Pink:Add error <b>OperationOutcome</b> (NO_EXIST) \n to the <b>Output-Parameters</b>; 

    endif

  repeat while (If next <b>Input-Parameters</b> exists) is (yes) not (no)

:Return "<b>Output-Parameters</b>";
stop
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>