<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="987px" preserveAspectRatio="none" style="width:1579px;height:987px;background:#FFFFFF;" version="1.1" viewBox="0 0 1579 987" width="1579px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="182" x="697" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="172" x="702" y="32.9951">$provide-prescription</text><ellipse cx="953.25" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="none" height="803.6406" style="stroke:#000000;stroke-width:1.5;" width="1557" x="11" y="77.2969"/><path d="M98,77.2969 L98,86.5938 L88,96.5938 L11,96.5938 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="14" y="91.292">transaction</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="840" x="533.25" y="167.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="543.25" y="188.7012">Validate all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="616.25" y="188.7012">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="753.25" y="188.7012">,</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="761.25" y="188.7012">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="839.25" y="188.7012">,</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="847.25" y="188.7012">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="944.25" y="188.7012">and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="972.25" y="188.7012">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="303" x="1060.25" y="188.7012">for the RxPrescription from Operation parameter</text><polygon fill="#F1F1F1" points="891.75,221.5313,1014.75,221.5313,1026.75,233.5313,1014.75,245.5313,891.75,245.5313,879.75,233.5313,891.75,221.5313" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="891.75" y="237.3394">Validation successfull</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="859.75" y="230.937">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1026.75" y="230.937">no</text><polygon fill="#F1F1F1" points="270.5,255.5313,713.5,255.5313,725.5,267.5313,713.5,279.5313,270.5,279.5313,258.5,267.5313,270.5,255.5313" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="270.5" y="271.3394">If</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="281.5" y="271.3394">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="408.5" y="271.3394">with</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="435.5" y="271.3394">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="73" x="640.5" y="271.3394">exists in ePA</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="238.5" y="264.937">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="725.5" y="264.937">no</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="309" x="23" y="289.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="289" x="33" y="310.6699">Return "OperationOutcome (duplicate failure)"</text><ellipse cx="177.5" cy="368.5" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="171.3128" x2="183.6872" y1="362.3128" y2="374.6872"/><line style="stroke:#222222;stroke-width:2.5;" x1="183.6872" x2="171.3128" y1="362.3128" y2="374.6872"/><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="909" x="352" y="289.5313"/><rect fill="#F1F1F1" height="85.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="247" x="383.5" y="315.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="428.5" y="336.6699">&lt;&lt; Create or Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="460.5" y="350.6387">Organization</text><line style="stroke:#181818;stroke-width:1.0;" x1="383.5" x2="630.5" y1="358.4688" y2="358.4688"/><line style="stroke:#181818;stroke-width:1.0;" x1="383.5" x2="630.5" y1="360.4688" y2="360.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="393.5" y="374.6074">identifier[TelematikID] = TelematikID</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="501" y="388.5762">...</text><rect fill="#F1F1F1" height="85.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="247" x="383.5" y="436.4063"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="428.5" y="457.5449">&lt;&lt; Create or Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="465" y="471.5137">Practitioner</text><line style="stroke:#181818;stroke-width:1.0;" x1="383.5" x2="630.5" y1="479.3438" y2="479.3438"/><line style="stroke:#181818;stroke-width:1.0;" x1="383.5" x2="630.5" y1="481.3438" y2="481.3438"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="393.5" y="495.4824">identifier[TelematikID] = TelematikID</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="501" y="509.4512">...</text><rect fill="#F1F1F1" height="85.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="282" x="366" y="557.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="428.5" y="578.4199">&lt;&lt; Create or Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="449.5" y="592.3887">PractitionerRole</text><line style="stroke:#181818;stroke-width:1.0;" x1="366" x2="648" y1="600.2188" y2="600.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="366" x2="648" y1="602.2188" y2="602.2188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="160" x="382.5" y="616.3574">practitioner = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="542.5" y="616.3574">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="626.5" y="616.3574">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="376" y="630.3262">organization = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="540" y="630.3262">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="633" y="630.3262">)</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="359" x="782" y="387.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="116" x="792" y="409.0918">Generate Hash for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="912" y="409.0918">EPAMedicationUniqueIdentifier</text><rect fill="#F1F1F1" height="113.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="571" x="676" y="456.9219"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="916.5" y="478.0605">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="922.5" y="492.0293">Medication</text><line style="stroke:#181818;stroke-width:1.0;" x1="676" x2="1247" y1="499.8594" y2="499.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="676" x2="1247" y1="501.8594" y2="501.8594"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="736.5" y="515.998">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="796.5" y="515.998">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="171" x="1015.5" y="515.998">] = Value(Generated Hash)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="686" y="529.9668">extension[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="752" y="529.9668">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="975" y="529.9668">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="905" y="543.9355">status =</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="963" y="543.9355">inactive</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="955.5" y="557.9043">...</text><rect fill="#555555" height="6" rx="2.5" ry="2.5" style="stroke:#555555;stroke-width:1.0;" width="909" x="352" y="663.1563"/><rect fill="#F1F1F1" height="127.7813" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="571" x="521" y="689.1563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="761.5" y="710.2949">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="738" y="724.2637">MedicationRequest</text><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="1092" y1="732.0938" y2="732.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="521" x2="1092" y1="734.0938" y2="734.0938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="531" y="748.2324">extension[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="597" y="748.2324">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="820" y="748.2324">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="760.5" y="762.2012">status=</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="810.5" y="762.2012">active</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="723.5" y="776.1699">subject=</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="779.5" y="776.1699">IdentifierKvid10</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="220" x="655" y="790.1387">medicationReference = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="875" y="790.1387">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="953" y="790.1387">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="672" y="804.1074">requester = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="821" y="804.1074">PractitionerRole</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="936" y="804.1074">)</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="247" x="1291" y="255.5313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="1301" y="276.6699">Return "OperationOutcome (failure)"</text><ellipse cx="1414.5" cy="334.5" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="1408.3128" x2="1420.6872" y1="328.3128" y2="340.6872"/><line style="stroke:#222222;stroke-width:2.5;" x1="1420.6872" x2="1408.3128" y1="328.3128" y2="340.6872"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="390" x="758.25" y="113.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="370" x="768.25" y="134.7324">Get next Item from Operation Parameter RxPrescription List</text><polygon fill="#F1F1F1" points="778.75,836.9375,1127.75,836.9375,1139.75,848.9375,1127.75,860.9375,778.75,860.9375,766.75,848.9375,778.75,836.9375" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="957.25" y="871.1479">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="349" x="778.75" y="852.7456">If next Item in Operation Parameter RxPrescription List exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1139.75" y="846.3433">yes</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="259" x="823.75" y="900.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="239" x="833.75" y="922.0762">Return "OperationOutcome (success)"</text><ellipse cx="953.25" cy="965.9063" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="953.25" cy="965.9063" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="177.5" x2="177.5" y1="323.5" y2="358.5"/><polygon fill="#181818" points="173.5,348.5,177.5,358.5,181.5,348.5,177.5,352.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="507" y1="401.4063" y2="436.4063"/><polygon fill="#181818" points="503,426.4063,507,436.4063,511,426.4063,507,430.4063" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="507" y1="522.2813" y2="557.2813"/><polygon fill="#181818" points="503,547.2813,507,557.2813,511,547.2813,507,551.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="961.5" y1="421.9219" y2="456.9219"/><polygon fill="#181818" points="957.5,446.9219,961.5,456.9219,965.5,446.9219,961.5,450.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="507" y1="295.5313" y2="315.5313"/><polygon fill="#181818" points="503,305.5313,507,315.5313,511,305.5313,507,309.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="961.5" y1="295.5313" y2="387.9531"/><polygon fill="#181818" points="957.5,377.9531,961.5,387.9531,965.5,377.9531,961.5,381.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="507" x2="507" y1="643.1563" y2="663.1563"/><polygon fill="#181818" points="503,653.1563,507,663.1563,511,653.1563,507,657.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="961.5" x2="961.5" y1="570.7344" y2="663.1563"/><polygon fill="#181818" points="957.5,653.1563,961.5,663.1563,965.5,653.1563,961.5,657.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="806.5" x2="806.5" y1="669.1563" y2="689.1563"/><polygon fill="#181818" points="802.5,679.1563,806.5,689.1563,810.5,679.1563,806.5,683.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="258.5" x2="177.5" y1="267.5313" y2="267.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="177.5" x2="177.5" y1="267.5313" y2="289.5313"/><polygon fill="#181818" points="173.5,279.5313,177.5,289.5313,181.5,279.5313,177.5,283.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="725.5" x2="806.5" y1="267.5313" y2="267.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="806.5" x2="806.5" y1="267.5313" y2="289.5313"/><polygon fill="#181818" points="802.5,279.5313,806.5,289.5313,810.5,279.5313,806.5,283.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="806.5" x2="806.5" y1="816.9375" y2="821.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="806.5" x2="953.25" y1="821.9375" y2="821.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="821.9375" y2="836.9375"/><polygon fill="#181818" points="949.25,826.9375,953.25,836.9375,957.25,826.9375,953.25,830.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1414.5" x2="1414.5" y1="289.5" y2="324.5"/><polygon fill="#181818" points="1410.5,314.5,1414.5,324.5,1418.5,314.5,1414.5,318.5" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="879.75" x2="492" y1="233.5313" y2="233.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="492" x2="492" y1="233.5313" y2="255.5313"/><polygon fill="#181818" points="488,245.5313,492,255.5313,496,245.5313,492,249.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1026.75" x2="1414.5" y1="233.5313" y2="233.5313"/><line style="stroke:#181818;stroke-width:1.0;" x1="1414.5" x2="1414.5" y1="233.5313" y2="255.5313"/><polygon fill="#181818" points="1410.5,245.5313,1414.5,255.5313,1418.5,245.5313,1414.5,249.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="201.5313" y2="221.5313"/><polygon fill="#181818" points="949.25,211.5313,953.25,221.5313,957.25,211.5313,953.25,215.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="147.5625" y2="167.5625"/><polygon fill="#181818" points="949.25,157.5625,953.25,167.5625,957.25,157.5625,953.25,161.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1139.75" x2="1552" y1="848.9375" y2="848.9375"/><polygon fill="#181818" points="1548,505.7578,1552,495.7578,1556,505.7578,1552,501.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1552" x2="1552" y1="130.5781" y2="848.9375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1552" x2="1148.25" y1="130.5781" y2="130.5781"/><polygon fill="#181818" points="1158.25,126.5781,1148.25,130.5781,1158.25,134.5781,1154.25,130.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="67.2969" y2="113.5938"/><polygon fill="#181818" points="949.25,103.5938,953.25,113.5938,957.25,103.5938,953.25,107.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="860.9375" y2="900.9375"/><polygon fill="#181818" points="949.25,890.9375,953.25,900.9375,957.25,890.9375,953.25,894.9375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="953.25" x2="953.25" y1="934.9063" y2="954.9063"/><polygon fill="#181818" points="949.25,944.9063,953.25,954.9063,957.25,944.9063,953.25,948.9063" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[bf08566d4c904f0c84a00848198f8ddb]
@startuml operation.provide-prescription
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $provide-prescription
start
partition transaction {

  repeat:Get next Item from Operation Parameter RxPrescription List;
  
  :Validate all <b>MedicationRequest</b>, <b>Medication</b>, <b>Organization</b> and <b>Practitioner</b> for the RxPrescription from Operation parameter;
  
  if (Validation successfull) then (yes)
    
    if(If <b>MedicationRequest</b> with <b>RxPrescriptionProcessIdentifier</b> exists in ePA) then (yes)
      
      #Pink:Return "OperationOutcome (duplicate failure)";
      end   
    
    else (no)

      fork
        
        :<< Create or Update >> 
        <b>Organization</b>
        ====
        identifier[TelematikID] = TelematikID
        ...;
        
        :<< Create or Update >> 
        <b>Practitioner</b>
        ====
        identifier[TelematikID] = TelematikID
        ...;
        
        :<< Create or Update >> 
        <b>PractitionerRole</b>
        ====
        practitioner = Reference(<b>Practitioner</b>)
        organization = Reference(<b>Organization</b>);

      fork again
        
        :Generate Hash for <b>EPAMedicationUniqueIdentifier</b>;
        
        :<< Create >> 
        <b>Medication</b>
        ====
        identifier[<b>EPAMedicationUniqueIdentifier</b>] = Value(Generated Hash)
        extension[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
        status = <b>inactive</b>
        ...;
        
      end fork
        
      :<< Create >> 
      <b>MedicationRequest</b>
      ====
      extension[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
      status=<b>active</b>
      subject=<b>IdentifierKvid10</b>
      medicationReference = Reference(<b>Medication</b>)
      requester = Reference(<b>PractitionerRole</b>);

    endif

  else (no)
    
    #Pink:Return "OperationOutcome (failure)";
    end
  
  endif
  
  repeat while (If next Item in Operation Parameter RxPrescription List exists) is (yes) not (no)
}   

#PaleGreen:Return "OperationOutcome (success)";
stop  
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>