<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="798px" preserveAspectRatio="none" style="width:1508px;height:798px;background:#FFFFFF;" version="1.1" viewBox="0 0 1508 798" width="1508px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="779.4219" style="stroke:#181818;stroke-width:0.5;" width="193" x="934" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="965.5" y="18.0669">ePA-Aktensystem</text><rect fill="#F5F5DC" height="779.4219" style="stroke:#181818;stroke-width:0.5;" width="346" x="1149" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="175" x="1234.5" y="18.0669">ePA-Aktensystem / VAU</text><rect fill="none" height="408.3672" style="stroke:#000000;stroke-width:1.5;" width="1246" x="255" y="366.0547"/><rect fill="none" height="132.5313" style="stroke:#000000;stroke-width:1.5;" width="1081" x="265" y="634.8906"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="45" x2="45" y1="89.0234" y2="791.4219"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="374" x2="374" y1="89.0234" y2="791.4219"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1030" x2="1030" y1="89.0234" y2="791.4219"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1244" x2="1244" y1="89.0234" y2="791.4219"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1418" x2="1418" y1="89.0234" y2="791.4219"/><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="41" x="25" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="32" y="77.7217">AVS</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="159" x="295" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="302" y="77.7217">E-Rezept-Fachdienst</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="145" x="958" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="965" y="77.7217">Information Service</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="143" x="1173" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1180" y="77.7217">Medication Service</text><rect fill="#EB5E34" height="62.8906" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="105" x="1366" y="25.1328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1402.5" y="45.1279">VAU</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1389" y="61.4248">Session</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1373" y="77.7217">Management</text><polygon fill="#1E90FF" points="362.5,116.1563,372.5,120.1563,362.5,124.1563,366.5,120.1563" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="45.5" x2="368.5" y1="120.1563" y2="120.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="52.5" y="115.0903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="292" x="65.5" y="115.0903">Anfrage: Dispensierinformationen übermitteln</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="149.2891" y2="149.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="149.2891" y2="162.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="162.2891" y2="162.2891"/><polygon fill="#1E90FF" points="385.5,158.2891,375.5,162.2891,385.5,166.2891,381.5,162.2891" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="144.2231">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="495" x="394.5" y="144.2231">Durchführen der standardmäßigen Workflow-Logik des E-Rezept-Fachdienstes</text><polygon fill="#1E90FF" points="56.5,187.4219,46.5,191.4219,56.5,195.4219,52.5,191.4219" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="50.5" x2="373.5" y1="191.4219" y2="191.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="62.5" y="186.356">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="75.5" y="186.356">Antwort: Erfolg</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="235.6875" y2="235.6875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="235.6875" y2="248.6875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="248.6875" y2="248.6875"/><polygon fill="#1E90FF" points="385.5,244.6875,375.5,248.6875,385.5,252.6875,381.5,248.6875" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="223.0552">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="409" x="394.5" y="215.4888">Persistieren der Dispensierinformationen in einer Warteschlange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="394.5" y="230.6216">für die asynchrone Übertragung</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="854" x="272" y="256.6875"/><path d="M272,256.6875 L338,256.6875 L338,263.6875 L328,273.6875 L272,273.6875 L272,256.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="285" y="270.7544">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="619" x="389.5" y="288.8262">Lokalisierung der Service-Endpunkte der ePA und der Akte eines Versicherten (s. Abschn. 4.1, 4.2)</text><polygon fill="#1E90FF" points="1018.5,317.9219,1028.5,321.9219,1018.5,325.9219,1022.5,321.9219" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="1024.5" y1="321.9219" y2="321.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="316.856">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="394.5" y="316.856">Anfrage: Widerspruchsinformationen zu Versorgungsprozessen</text><polygon fill="#1E90FF" points="385.5,347.0547,375.5,351.0547,385.5,355.0547,381.5,351.0547" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="379.5" x2="1029.5" y1="351.0547" y2="351.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="391.5" y="345.9888">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="404.5" y="345.9888">Antwort: Widerspruchsinformationen</text><path d="M255,366.0547 L319,366.0547 L319,373.1875 L309,383.1875 L255,383.1875 L255,366.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="408.3672" style="stroke:#000000;stroke-width:1.5;" width="1246" x="255" y="366.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="270" y="379.1216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="366" x="334" y="378.2651">[Widerspruch zum Versorgungsprozess dgMP vorhanden]</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="404.3203" y2="404.3203"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="404.3203" y2="417.3203"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="417.3203" y2="417.3203"/><polygon fill="#1E90FF" points="385.5,413.3203,375.5,417.3203,385.5,421.3203,381.5,417.3203" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="399.2544">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="449" x="394.5" y="399.2544">Abbruch. Löschen der Dispensierinformationen aus der Warteschlange</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="255" x2="1501" y1="426.3203" y2="426.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="327" x="260" y="436.5308">[Kein Widerspruch zum Versorgungsprozess dgMP]</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="1222" x="272" y="440.125"/><path d="M272,440.125 L338,440.125 L338,447.125 L328,457.125 L272,457.125 L272,440.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="285" y="454.1919">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="344" x="711" y="472.2637">Login in die Akte des Versicherten (siehe. Abschn. 4.3)</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="520.4922" y2="520.4922"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="520.4922" y2="533.4922"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="533.4922" y2="533.4922"/><polygon fill="#1E90FF" points="385.5,529.4922,375.5,533.4922,385.5,537.4922,381.5,533.4922" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="507.8599">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="494" x="394.5" y="500.2935">Erzeugen der FHIR-Ressourcen MedicationDispense, Medication, Organization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="510" x="394.5" y="515.4263">auf Grundlage der Dispensierinformationen sowie rxPrescriptionProcessIdentifier</text><polygon fill="#1E90FF" points="1232.5,558.625,1242.5,562.625,1232.5,566.625,1236.5,562.625" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="1238.5" y1="562.625" y2="562.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="381.5" y="557.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="509" x="394.5" y="557.5591">Übermittlung der erzeugten FHIR-Ressourcen als FHIR Operation per HTTP POST</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1244.5" x2="1286.5" y1="606.8906" y2="606.8906"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1286.5" x2="1286.5" y1="606.8906" y2="619.8906"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1245.5" x2="1286.5" y1="619.8906" y2="619.8906"/><polygon fill="#1E90FF" points="1255.5,615.8906,1245.5,619.8906,1255.5,623.8906,1251.5,619.8906" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1251.5" y="594.2583">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1273.5" y="586.6919">FHIR-Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1273.5" y="601.8247">persistieren</text><path d="M265,634.8906 L329,634.8906 L329,642.0234 L319,652.0234 L265,652.0234 L265,634.8906 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.5313" style="stroke:#000000;stroke-width:1.5;" width="1081" x="265" y="634.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="280" y="647.9575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="344" y="647.1011">[successful case]</text><polygon fill="#1E90FF" points="385.5,669.1563,375.5,673.1563,385.5,677.1563,381.5,673.1563" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="379.5" x2="1243.5" y1="673.1563" y2="673.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="391.5" y="668.0903">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="413.5" y="668.0903">Antwort: Transaktion erfolgreich</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="702.2891" y2="702.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="702.2891" y2="715.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="715.2891" y2="715.2891"/><polygon fill="#1E90FF" points="385.5,711.2891,375.5,715.2891,385.5,719.2891,381.5,715.2891" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="381.5" y="697.2231">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="388" x="403.5" y="697.2231">Löschen der Dispensierinformationen aus der Warteschlange</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="265" x2="1346" y1="724.2891" y2="724.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="374.5" x2="416.5" y1="746.4219" y2="746.4219"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="416.5" x2="416.5" y1="746.4219" y2="759.4219"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="375.5" x2="416.5" y1="759.4219" y2="759.4219"/><polygon fill="#1E90FF" points="385.5,755.4219,375.5,759.4219,385.5,763.4219,381.5,759.4219" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="381.5" y="741.356">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="620" x="403.5" y="741.356">Abbruch. Die Dispensierinformationen bleiben in der Warteschlange für eine spätere Übertragung</text><!--MD5=[339245abc99172259356f4616d54a29c]
@startuml

skinparam Shadowing false
skinparam ParticipantPadding 20
skinparam BoxPadding 10

skinparam sequence {
    ArrowColor DodgerBlue
    ActorBorderColor DodgerBlue
    LifeLineBorderColor Blue

    ParticipantBackgroundColor #3483eb
    ParticipantBorderColor #3483eb
    ParticipantFontSize 14
    ParticipantFontColor White

    ActorBackgroundColor #3483eb
    ActorFontSize 14
    NoteBackgroundColor #3483eb
}

hide footbox
autonumber

participant "AVS" as PVS
participant "E-Rezept-Fachdienst" as ERFD

box "ePA-Aktensystem" #LightGray
    participant "Information Service" as IS
end box

box "ePA-Aktensystem / VAU" #Beige
    participant "Medication Service" as EPA
    participant "VAU \nSession \nManagement" as VAU #eb5e34
end box

PVS -> ERFD: Anfrage: Dispensierinformationen übermitteln
ERFD -> ERFD: Durchführen der standardmäßigen Workflow-Logik des E-Rezept-Fachdienstes
ERFD - -> PVS: Antwort: Erfolg

ERFD -> ERFD: Persistieren der Dispensierinformationen in einer Warteschlange\nfür die asynchrone Übertragung

ref over ERFD, IS: Lokalisierung der Service-Endpunkte der ePA und der Akte eines Versicherten (s. Abschn. 4.1, 4.2)

ERFD -> IS: Anfrage: Widerspruchsinformationen zu Versorgungsprozessen
IS - -> ERFD: Antwort: Widerspruchsinformationen

alt Widerspruch zum Versorgungsprozess dgMP vorhanden
    ERFD -> ERFD: Abbruch. Löschen der Dispensierinformationen aus der Warteschlange
else Kein Widerspruch zum Versorgungsprozess dgMP

    ref over ERFD, VAU: Login in die Akte des Versicherten (siehe. Abschn. 4.3)

    ERFD -> ERFD: Erzeugen der FHIR-Ressourcen MedicationDispense, Medication, Organization\nauf Grundlage der Dispensierinformationen sowie rxPrescriptionProcessIdentifier
    ERFD -> EPA: Übermittlung der erzeugten FHIR-Ressourcen als FHIR Operation per HTTP POST
    EPA -> EPA: FHIR-Ressourcen\npersistieren

    alt successful case
        EPA - -> ERFD: Antwort: Transaktion erfolgreich
        ERFD -> ERFD: Löschen der Dispensierinformationen aus der Warteschlange
    else
        ERFD -> ERFD: Abbruch. Die Dispensierinformationen bleiben in der Warteschlange für eine spätere Übertragung
    end

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>