<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2009px" preserveAspectRatio="none" style="width:2176px;height:2009px;background:#FFFFFF;" version="1.1" viewBox="0 0 2176 2009" width="2176px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="215" x="979" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="205" x="984" y="32.9951">$provide-prescription-erp</text><ellipse cx="1217.125" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="828" x="803.125" y="141.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="813.125" y="162.4043">Validate</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="868.125" y="162.4043">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1005.125" y="162.4043">,</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1013.125" y="162.4043">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1091.125" y="162.4043">,</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1099.125" y="162.4043">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="1196.125" y="162.4043">and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1224.125" y="162.4043">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="1312.125" y="162.4043">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1344.125" y="162.4043">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1469.125" y="162.4043">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="1489.125" y="162.4043">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="30" x="1591.125" y="162.4043">.part</text><polygon fill="#F1F1F1" points="1155.625,195.2344,1278.625,195.2344,1290.625,207.2344,1278.625,219.2344,1155.625,219.2344,1143.625,207.2344,1155.625,195.2344" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="123" x="1155.625" y="211.0425">Validation successfull</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1123.625" y="204.6401">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1290.625" y="204.6401">no</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="448" x="402.25" y="229.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="422.75" y="250.373">Generate</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="485.75" y="250.373">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="712.75" y="250.373">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="412.25" y="264.3418"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="416.25" y="264.3418">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="541.25" y="264.3418">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="561.25" y="264.3418">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="663.25" y="264.3418">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="86" x="697.25" y="264.3418">authoredOn</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="787.25" y="264.3418">and the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="432.25" y="278.3105"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="436.25" y="278.3105">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="561.25" y="278.3105">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="581.25" y="278.3105">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="683.25" y="278.3105">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="717.25" y="278.3105">PrescriptionId</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="816.25" y="278.3105">;</text><polygon fill="#F1F1F1" points="381.75,311.1406,870.75,311.1406,882.75,343.1523,870.75,375.1641,381.75,375.1641,369.75,343.1523,381.75,311.1406" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="624.25" y="321.3511"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="104" x="381.75" y="334.1558">Check if there is a</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="489.75" y="334.1558">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="45" x="616.75" y="334.1558">with the</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="665.75" y="334.1558">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="866.75" y="334.1558"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="615.75" y="346.9604">and</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="58" x="438.25" y="359.7651">the status</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="39" x="500.25" y="359.7651">active</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="12" x="543.25" y="359.7651">or</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="67" x="559.25" y="359.7651">completed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="188" x="630.25" y="359.7651">already in the Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="4" x="624.25" y="372.5698"> </text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="349.75" y="340.5581">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="882.75" y="340.5581">no</text><rect fill="#FFC0CB" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="499" x="11" y="385.1641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="21" y="406.3027">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="84" y="406.3027">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="273" x="223" y="406.3027">(MEDICATIONSVC_PRESCRIPTION_DUPLICATE)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="313" x="33" y="420.2715">or (MEDICATIONSVC_PRESCRIPTION_STATUS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="350" y="420.2715">Output-Parameters</text><rect fill="none" height="1401.2617" style="stroke:#000000;stroke-width:1.5;" width="920" x="530" y="385.1641"/><path d="M617,385.1641 L617,394.4609 L607,404.4609 L530,404.4609 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="533" y="399.1592">transaction</text><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="398" x="793" y="421.4609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="805.5" y="442.5996">Check for Existing</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="920.5" y="442.5996">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="1017.5" y="442.5996">with TelematikId from the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="803" y="456.5684"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="807" y="456.5684">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="932" y="456.5684">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="952" y="456.5684">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1054" y="456.5684">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1088" y="456.5684">Organization</text><polygon fill="#F1F1F1" points="928.5,489.3984,1055.5,489.3984,1067.5,501.3984,1055.5,513.3984,928.5,513.3984,916.5,501.3984,928.5,489.3984" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="83" x="928.5" y="505.2065">Organization</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="1015.5" y="505.2065">exists?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="896.5" y="498.8042">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1067.5" y="498.8042">no</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="434" x="550" y="523.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="722" y="544.5371">&lt;&lt;Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="716.5" y="558.5059">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="724.5" y="558.5059">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="560" y="572.4746">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="568" y="572.4746">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="600" y="572.4746">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="725" y="572.4746">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="745" y="572.4746">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="847" y="572.4746">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="93" x="881" y="572.4746">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="763" y="586.4434">  </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="635" y="600.4121">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="761" y="614.3809">...</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="426" x="1004" y="523.3984"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1172" y="544.5371">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1170.5" y="558.5059">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1014" y="572.4746">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1046" y="572.4746">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1171" y="572.4746">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="1191" y="572.4746">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1293" y="572.4746">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1327" y="572.4746">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1215" y="586.4434"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="1081" y="600.4121">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="1211" y="614.3809">...</text><polygon fill="#F1F1F1" points="992,633.2109,1004,645.2109,992,657.2109,980,645.2109,992,633.2109" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="389" x="797.5" y="677.2109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="810" y="698.3496">Check for Existing</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="925" y="698.3496">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="1013" y="698.3496">with TelematikId from the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="807.5" y="712.3184"> </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="811.5" y="712.3184">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="936.5" y="712.3184">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="956.5" y="712.3184">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1058.5" y="712.3184">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1092.5" y="712.3184">Practitioner</text><polygon fill="#F1F1F1" points="932.5,745.1484,1051.5,745.1484,1063.5,757.1484,1051.5,769.1484,932.5,769.1484,920.5,757.1484,932.5,745.1484" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75" x="932.5" y="760.9565">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="1011.5" y="760.9565">exists?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="900.5" y="754.5542">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1063.5" y="754.5542">no</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="425" x="559" y="779.1484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="726.5" y="800.2871">&lt;&lt;Update &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="725.5" y="814.2559">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="733.5" y="814.2559">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="569" y="828.2246">  </text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="577" y="828.2246">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="609" y="828.2246">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="734" y="828.2246">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="754" y="828.2246">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="856" y="828.2246">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="84" x="890" y="828.2246">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="8" x="767.5" y="842.1934">  </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="639.5" y="856.1621">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="765.5" y="870.1309">...</text><rect fill="#F1F1F1" height="103.8125" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="417" x="1004" y="779.1484"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="1167.5" y="800.2871">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1170.5" y="814.2559">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="1014" y="828.2246">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1046" y="828.2246">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="1171" y="828.2246">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="1191" y="828.2246">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1293" y="828.2246">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1327" y="828.2246">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="4" x="1210.5" y="842.1934"> </text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="272" x="1076.5" y="856.1621">identifier[TelematikID] = Value(TelematikID)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="1206.5" y="870.1309">...</text><polygon fill="#F1F1F1" points="992,888.9609,1004,900.9609,992,912.9609,980,900.9609,992,888.9609" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="632" x="676" y="932.9609"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="111" x="686" y="954.0996">Check for Existing</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="801" y="954.0996">PractitionerRole</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="165" x="920" y="954.0996">with references to specific</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1089" y="954.0996">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="24" x="1186" y="954.0996">and</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1214" y="954.0996">Practitioner</text><rect fill="#F1F1F1" height="85.875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="282" x="851" y="1035.332"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="947" y="1056.4707">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="934.5" y="1070.4395">PractitionerRole</text><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="1133" y1="1078.2695" y2="1078.2695"/><line style="stroke:#181818;stroke-width:1.0;" x1="851" x2="1133" y1="1080.2695" y2="1080.2695"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="160" x="867.5" y="1094.4082">practitioner = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="84" x="1027.5" y="1094.4082">Practitioner</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1111.5" y="1094.4082">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="861" y="1108.377">organization = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="93" x="1025" y="1108.377">Organization</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1118" y="1108.377">)</text><polygon fill="#F1F1F1" points="918.5,986.9297,1065.5,986.9297,1077.5,998.9297,1065.5,1010.9297,918.5,1010.9297,906.5,998.9297,918.5,986.9297" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="996" y="1021.1401">no</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103" x="918.5" y="1002.7378">PractitionerRole</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="40" x="1025.5" y="1002.7378">exists?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1077.5" y="996.3354">yes</text><polygon fill="#F1F1F1" points="992,1141.207,1004,1153.207,992,1165.207,980,1153.207,992,1141.207" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="47.9375" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="586" x="699" y="1185.207"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="786.5" y="1206.3457">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="870.5" y="1206.3457">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1084.5" y="1206.3457">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="709" y="1220.3145">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="834" y="1220.3145">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="854" y="1220.3145">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="956" y="1220.3145">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="990" y="1220.3145">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="1068" y="1220.3145">.Id and the Input-</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1176" y="1220.3145">PrescriptionId</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="794" x="595" y="1253.1445"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="605" y="1274.2832">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="689" y="1274.2832">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="912" y="1274.2832">from the hashed</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1020" y="1274.2832">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="1145" y="1274.2832">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="1165" y="1274.2832">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1267" y="1274.2832">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1301" y="1274.2832">Medication</text><rect fill="#F1F1F1" height="141.75" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="571" x="706.5" y="1307.1133"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="947" y="1328.252">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="953" y="1342.2207">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="796.5" y="1356.1895">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="828.5" y="1356.1895">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="953.5" y="1356.1895">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="973.5" y="1356.1895">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1075.5" y="1356.1895">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1109.5" y="1356.1895">Medication</text><line style="stroke:#181818;stroke-width:1.0;" x1="706.5" x2="1277.5" y1="1364.0195" y2="1364.0195"/><line style="stroke:#181818;stroke-width:1.0;" x1="706.5" x2="1277.5" y1="1366.0195" y2="1366.0195"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="723" y="1380.1582">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="219" x="783" y="1380.1582">EPAMedicationUniqueIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="259" x="1002" y="1380.1582">] = Value(EPAMedicationUniqueIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="732.5" y="1394.127">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="792.5" y="1394.127">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="249" x="1002.5" y="1394.127">] = Value(RxOriginatorProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="66" x="716.5" y="1408.0957">extension[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="782.5" y="1408.0957">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="1005.5" y="1408.0957">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="54" x="935.5" y="1422.0645">status =</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="993.5" y="1422.0645">inactive</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="12" x="986" y="1436.0332">...</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="457" x="763.5" y="1468.8633"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="786.5" y="1490.002">Generate for</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="870.5" y="1490.002">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="1084.5" y="1490.002">from the values of</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="773.5" y="1503.9707">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="898.5" y="1503.9707">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="918.5" y="1503.9707">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1020.5" y="1503.9707">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="1054.5" y="1503.9707">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="15" x="1191.5" y="1503.9707">.Id</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="49" x="775.5" y="1517.9395">and the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="828.5" y="1517.9395">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="20" x="953.5" y="1517.9395">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="973.5" y="1517.9395">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="1075.5" y="1517.9395">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="99" x="1109.5" y="1517.9395">PrescriptionId</text><rect fill="#F1F1F1" height="169.6875" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="565" x="709.5" y="1550.7695"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="947" y="1571.9082">&lt;&lt; Create &gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="923.5" y="1585.877">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="28" x="767" y="1599.8457">from</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="125" x="799" y="1599.8457">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="20" x="924" y="1599.8457">[x].</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="102" x="944" y="1599.8457">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="34" x="1046" y="1599.8457">.part.</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="137" x="1080" y="1599.8457">MedicationRequest</text><line style="stroke:#181818;stroke-width:1.0;" x1="709.5" x2="1274.5" y1="1607.6758" y2="1607.6758"/><line style="stroke:#181818;stroke-width:1.0;" x1="709.5" x2="1274.5" y1="1609.6758" y2="1609.6758"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="719.5" y="1623.8145">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="779.5" y="1623.8145">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="262" x="1002.5" y="1623.8145">] = Value(RxPrescriptionProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="60" x="732.5" y="1637.7832">identifier[</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="210" x="792.5" y="1637.7832">RxOriginatorProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="249" x="1002.5" y="1637.7832">] = Value(RxOriginatorProcessIdentifier)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="946" y="1651.752">status=</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="42" x="996" y="1651.752">active</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="47" x="930.5" y="1665.7207">intent=</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="76" x="977.5" y="1665.7207">filler-order</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="909" y="1679.6895">subject=</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="110" x="965" y="1679.6895">IdentifierKvid10</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="220" x="840.5" y="1693.6582">medicationReference = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="1060.5" y="1693.6582">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1138.5" y="1693.6582">)</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="857.5" y="1707.627">requester = Reference(</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="115" x="1006.5" y="1707.627">PractitionerRole</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1121.5" y="1707.627">)</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="692" x="646" y="1740.457"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="99" x="656" y="1761.5957">Add information</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="759" y="1761.5957">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="288" x="898" y="1761.5957">(MEDICATIONSVC_OPERATION_SUCCESS) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1190" y="1761.5957">Output-Parameters</text><polygon fill="#F1F1F1" points="626.25,1792.4258,638.25,1804.4258,626.25,1816.4258,614.25,1804.4258,626.25,1792.4258" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="656" x="1480" y="229.2344"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="1490" y="250.373">Add error</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="135" x="1553" y="250.373">OperationOutcome</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="292" x="1692" y="250.373">(MEDICATIONSVC_NO_VALID_STRUCTURE) to the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1988" y="250.373">Output-Parameters</text><polygon fill="#F1F1F1" points="1217.125,1822.4258,1229.125,1834.4258,1217.125,1846.4258,1205.125,1834.4258,1217.125,1822.4258" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="365" x="1034.625" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="1044.625" y="108.4355">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="102" x="1101.625" y="108.4355">RxPrescription</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="1207.625" y="108.4355">from the</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="125" x="1264.625" y="108.4355">Input-Parameters</text><polygon fill="#F1F1F1" points="1123.125,1866.4258,1311.125,1866.4258,1323.125,1878.4258,1311.125,1890.4258,1123.125,1890.4258,1111.125,1878.4258,1123.125,1866.4258" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="1221.125" y="1900.6362">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="1123.125" y="1882.2339">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111" x="1162.125" y="1882.2339">Input-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1277.125" y="1882.2339">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="1323.125" y="1875.8315">yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="214" x="1110.125" y="1922.1362"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="1120.125" y="1943.2749">Return "</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="138" x="1171.125" y="1943.2749">Output-Parameters</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="5" x="1309.125" y="1943.2749">"</text><ellipse cx="1217.125" cy="1987.105" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="1217.125" cy="1987.105" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="916.5" x2="767" y1="501.3984" y2="501.3984"/><line style="stroke:#181818;stroke-width:1.0;" x1="767" x2="767" y1="501.3984" y2="523.3984"/><polygon fill="#181818" points="763,513.3984,767,523.3984,771,513.3984,767,517.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1067.5" x2="1217" y1="501.3984" y2="501.3984"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217" x2="1217" y1="501.3984" y2="523.3984"/><polygon fill="#181818" points="1213,513.3984,1217,523.3984,1221,513.3984,1217,517.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="767" x2="767" y1="627.2109" y2="645.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="767" x2="980" y1="645.2109" y2="645.2109"/><polygon fill="#181818" points="970,641.2109,980,645.2109,970,649.2109,974,645.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217" x2="1217" y1="627.2109" y2="645.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217" x2="1004" y1="645.2109" y2="645.2109"/><polygon fill="#181818" points="1014,641.2109,1004,645.2109,1014,649.2109,1010,645.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="469.3984" y2="489.3984"/><polygon fill="#181818" points="988,479.3984,992,489.3984,996,479.3984,992,483.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="657.2109" y2="677.2109"/><polygon fill="#181818" points="988,667.2109,992,677.2109,996,667.2109,992,671.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="920.5" x2="771.5" y1="757.1484" y2="757.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.5" x2="771.5" y1="757.1484" y2="779.1484"/><polygon fill="#181818" points="767.5,769.1484,771.5,779.1484,775.5,769.1484,771.5,773.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1063.5" x2="1212.5" y1="757.1484" y2="757.1484"/><line style="stroke:#181818;stroke-width:1.0;" x1="1212.5" x2="1212.5" y1="757.1484" y2="779.1484"/><polygon fill="#181818" points="1208.5,769.1484,1212.5,779.1484,1216.5,769.1484,1212.5,773.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.5" x2="771.5" y1="882.9609" y2="900.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="771.5" x2="980" y1="900.9609" y2="900.9609"/><polygon fill="#181818" points="970,896.9609,980,900.9609,970,904.9609,974,900.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1212.5" x2="1212.5" y1="882.9609" y2="900.9609"/><line style="stroke:#181818;stroke-width:1.0;" x1="1212.5" x2="1004" y1="900.9609" y2="900.9609"/><polygon fill="#181818" points="1014,896.9609,1004,900.9609,1014,904.9609,1010,900.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="725.1484" y2="745.1484"/><polygon fill="#181818" points="988,735.1484,992,745.1484,996,735.1484,992,739.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="912.9609" y2="932.9609"/><polygon fill="#181818" points="988,922.9609,992,932.9609,996,922.9609,992,926.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1010.9297" y2="1035.332"/><polygon fill="#181818" points="988,1025.332,992,1035.332,996,1025.332,992,1029.332" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1077.5" x2="1143" y1="998.9297" y2="998.9297"/><polygon fill="#181818" points="1139,1068.2695,1143,1078.2695,1147,1068.2695,1143,1072.2695" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1143" x2="1143" y1="998.9297" y2="1153.207"/><line style="stroke:#181818;stroke-width:1.0;" x1="1143" x2="1004" y1="1153.207" y2="1153.207"/><polygon fill="#181818" points="1014,1149.207,1004,1153.207,1014,1157.207,1010,1153.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1121.207" y2="1141.207"/><polygon fill="#181818" points="988,1131.207,992,1141.207,996,1131.207,992,1135.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="966.9297" y2="986.9297"/><polygon fill="#181818" points="988,976.9297,992,986.9297,996,976.9297,992,980.9297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1165.207" y2="1185.207"/><polygon fill="#181818" points="988,1175.207,992,1185.207,996,1175.207,992,1179.207" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1233.1445" y2="1253.1445"/><polygon fill="#181818" points="988,1243.1445,992,1253.1445,996,1243.1445,992,1247.1445" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1287.1133" y2="1307.1133"/><polygon fill="#181818" points="988,1297.1133,992,1307.1133,996,1297.1133,992,1301.1133" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1448.8633" y2="1468.8633"/><polygon fill="#181818" points="988,1458.8633,992,1468.8633,996,1458.8633,992,1462.8633" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1530.7695" y2="1550.7695"/><polygon fill="#181818" points="988,1540.7695,992,1550.7695,996,1540.7695,992,1544.7695" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1720.457" y2="1740.457"/><polygon fill="#181818" points="988,1730.457,992,1740.457,996,1730.457,992,1734.457" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="369.75" x2="260.5" y1="343.1523" y2="343.1523"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="343.1523" y2="385.1641"/><polygon fill="#181818" points="256.5,375.1641,260.5,385.1641,264.5,375.1641,260.5,379.1641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="882.75" x2="992" y1="343.1523" y2="343.1523"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="343.1523" y2="421.4609"/><polygon fill="#181818" points="988,411.4609,992,421.4609,996,411.4609,992,415.4609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="260.5" y1="433.1016" y2="1804.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="260.5" x2="614.25" y1="1804.4258" y2="1804.4258"/><polygon fill="#181818" points="604.25,1800.4258,614.25,1804.4258,604.25,1808.4258,608.25,1804.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="992" y1="1774.4258" y2="1804.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="992" x2="638.25" y1="1804.4258" y2="1804.4258"/><polygon fill="#181818" points="648.25,1800.4258,638.25,1804.4258,648.25,1808.4258,644.25,1804.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="626.25" x2="626.25" y1="291.1406" y2="311.1406"/><polygon fill="#181818" points="622.25,301.1406,626.25,311.1406,630.25,301.1406,626.25,305.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1143.625" x2="626.25" y1="207.2344" y2="207.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="626.25" x2="626.25" y1="207.2344" y2="229.2344"/><polygon fill="#181818" points="622.25,219.2344,626.25,229.2344,630.25,219.2344,626.25,223.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1290.625" x2="1808" y1="207.2344" y2="207.2344"/><line style="stroke:#181818;stroke-width:1.0;" x1="1808" x2="1808" y1="207.2344" y2="229.2344"/><polygon fill="#181818" points="1804,219.2344,1808,229.2344,1812,219.2344,1808,223.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="626.25" x2="626.25" y1="1816.4258" y2="1834.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="626.25" x2="1205.125" y1="1834.4258" y2="1834.4258"/><polygon fill="#181818" points="1195.125,1830.4258,1205.125,1834.4258,1195.125,1838.4258,1199.125,1834.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1808" x2="1808" y1="263.2031" y2="1834.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="1808" x2="1229.125" y1="1834.4258" y2="1834.4258"/><polygon fill="#181818" points="1239.125,1830.4258,1229.125,1834.4258,1239.125,1838.4258,1235.125,1834.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="175.2344" y2="195.2344"/><polygon fill="#181818" points="1213.125,185.2344,1217.125,195.2344,1221.125,185.2344,1217.125,189.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="121.2656" y2="141.2656"/><polygon fill="#181818" points="1213.125,131.2656,1217.125,141.2656,1221.125,131.2656,1217.125,135.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1323.125" x2="2150" y1="1878.4258" y2="1878.4258"/><polygon fill="#181818" points="2146,1000.0547,2150,990.0547,2154,1000.0547,2150,996.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2150" x2="2150" y1="104.2813" y2="1878.4258"/><line style="stroke:#181818;stroke-width:1.0;" x1="2150" x2="1399.625" y1="104.2813" y2="104.2813"/><polygon fill="#181818" points="1409.625,100.2813,1399.625,104.2813,1409.625,108.2813,1405.625,104.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="1846.4258" y2="1866.4258"/><polygon fill="#181818" points="1213.125,1856.4258,1217.125,1866.4258,1221.125,1856.4258,1217.125,1860.4258" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="1213.125,77.2969,1217.125,87.2969,1221.125,77.2969,1217.125,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="1890.4258" y2="1922.1362"/><polygon fill="#181818" points="1213.125,1912.1362,1217.125,1922.1362,1221.125,1912.1362,1217.125,1916.1362" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1217.125" x2="1217.125" y1="1956.105" y2="1976.105"/><polygon fill="#181818" points="1213.125,1966.105,1217.125,1976.105,1221.125,1966.105,1217.125,1970.105" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[2cbb9092344278f6a751533fe759e437]
@startuml operation.provide-prescription-erp
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $provide-prescription-erp
start


repeat:Get next <b>RxPrescription</b> from the <b>Input-Parameters</b>;

:Validate <b>MedicationRequest</b>, <b>Medication</b>, <b>Organization</b> and <b>Practitioner</b> from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part;

if (Validation successfull) then (yes)
  
  :Generate <b>RxPrescriptionProcessIdentifier</b> from the values of \n <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>authoredOn</b> and the \n <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>PrescriptionId</b>;;

  if(\rCheck if there is a <b>MedicationRequest</b> with the <b>RxPrescriptionProcessIdentifier</b> \n and \n the status <b>active</b> or <b>completed</b> already in the Medication Service\r) then (yes)
    
    #Pink:Add error <b>OperationOutcome</b> (MEDICATIONSVC_PRESCRIPTION_DUPLICATE) \nor (MEDICATIONSVC_PRESCRIPTION_STATUS) to the <b>Output-Parameters</b>; 
  
  else (no)

    partition transaction {
        
      :Check for Existing <b>Organization</b> with TelematikId from the \n <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Organization</b>;

      if (<b>Organization</b> exists?) then (yes)

        :<<Update >> 
        <b>Organization</b>
        <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Organization</b></i>
        
        identifier[TelematikID] = Value(TelematikID)
      ...;

      else (no)

        :<< Create >> 
        <b>Organization</b>
        <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Organization</b></i>
        
        identifier[TelematikID] = Value(TelematikID)
        ...;

      endif

      :Check for Existing <b>Practitioner</b> with TelematikId from the \n <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Practitioner</b>;

      if (<b>Practitioner</b> exists?) then (yes)

        :<<Update >> 
        <b>Practitioner</b>
        <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Practitioner</b></i>
        
        identifier[TelematikID] = Value(TelematikID)
      ...;

      else (no)

        :<< Create >> 
        <b>Practitioner</b>
        <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Practitioner</b></i>
        
        identifier[TelematikID] = Value(TelematikID)
        ...;

      endif

      :Check for Existing <b>PractitionerRole</b> with references to specific <b>Organization</b> and <b>Practitioner</b>;

      if (<b>PractitionerRole</b> exists?) then (yes)

      else (no)
        
        :<< Create >> 
        <b>PractitionerRole</b>
        ====
        practitioner = Reference(<b>Practitioner</b>)
        organization = Reference(<b>Organization</b>);

      endif

      :Generate for <b>RxOriginatorProcessIdentifier</b> from the values of 
      <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Medication</b>.Id and the Input-<b>PrescriptionId</b>;

      :Generate for <b>EPAMedicationUniqueIdentifier</b> from the hashed <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Medication</b>;
        
      :<< Create >>
      <b>Medication</b>
      <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>Medication</b></i>
      ====
      identifier[<b>EPAMedicationUniqueIdentifier</b>] = Value(EPAMedicationUniqueIdentifier)
      identifier[<b>RxOriginatorProcessIdentifier</b>] = Value(RxOriginatorProcessIdentifier)
      extension[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
      status = <b>inactive</b>
      ...;
        
      :Generate for <b>RxOriginatorProcessIdentifier</b> from the values of 
      <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>MedicationRequest</b>.Id 
      and the <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>PrescriptionId</b>;

      :<< Create >>
      <b>MedicationRequest</b>
      <i>from <b>Input-Parameters</b>[x].<b>RxPrescription</b>.part.<b>MedicationRequest</b></i>
      ====
      identifier[<b>RxPrescriptionProcessIdentifier</b>] = Value(RxPrescriptionProcessIdentifier)
      identifier[<b>RxOriginatorProcessIdentifier</b>] = Value(RxOriginatorProcessIdentifier)
      status=<b>active</b>
      intent=<b>filler-order</b>
      subject=<b>IdentifierKvid10</b>
      medicationReference = Reference(<b>Medication</b>)
      requester = Reference(<b>PractitionerRole</b>);

      #PaleGreen:Add information <b>OperationOutcome</b> (MEDICATIONSVC_OPERATION_SUCCESS) to the <b>Output-Parameters</b>;
    }

  endif

else (no)
  #Pink:Add error <b>OperationOutcome</b> (MEDICATIONSVC_NO_VALID_STRUCTURE) to the <b>Output-Parameters</b>;
endif

repeat while (If next <b>Input-Parameters</b> exists) is (yes) not (no)
  
:Return "<b>Output-Parameters</b>";
stop  
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>