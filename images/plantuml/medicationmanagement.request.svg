<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="840px" preserveAspectRatio="none" style="width:1627px;height:840px;background:#FFFFFF;" version="1.1" viewBox="0 0 1627 840" width="1627px" zoomAndPan="magnify"><defs/><g><rect fill="#D3D3D3" height="821.5547" style="stroke:#181818;stroke-width:0.5;" width="193" x="1007" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="1038.5" y="18.0669">ePA-Aktensystem</text><rect fill="#F5F5DC" height="821.5547" style="stroke:#181818;stroke-width:0.5;" width="346" x="1222" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="175" x="1307.5" y="18.0669">ePA-Aktensystem / VAU</text><rect fill="none" height="450.5" style="stroke:#000000;stroke-width:1.5;" width="1389.5" x="231" y="366.0547"/><rect fill="none" height="132.5313" style="stroke:#000000;stroke-width:1.5;" width="1333" x="241" y="677.0234"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="58" x2="58" y1="89.0234" y2="833.5547"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="350" x2="350" y1="89.0234" y2="833.5547"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1103" x2="1103" y1="89.0234" y2="833.5547"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1298" x2="1298" y1="89.0234" y2="833.5547"/><line style="stroke:#0000FF;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1472" x2="1472" y1="89.0234" y2="833.5547"/><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="67" x="25" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="32" y="77.7217">PVS/KIS</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="159" x="271" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="145" x="278" y="77.7217">E-Rezept-Fachdienst</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="145" x="1031" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="1038" y="77.7217">Information Service</text><rect fill="#EB5E34" height="62.8906" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="105" x="1246" y="25.1328"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="1282.5" y="45.1279">VAU</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="1269" y="61.4248">Session</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="1253" y="77.7217">Management</text><rect fill="#3483EB" height="30.2969" rx="2.5" ry="2.5" style="stroke:#3483EB;stroke-width:0.5;" width="143" x="1401" y="57.7266"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1408" y="77.7217">Medication Service</text><polygon fill="#1E90FF" points="338.5,116.1563,348.5,120.1563,338.5,124.1563,342.5,120.1563" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="58.5" x2="344.5" y1="120.1563" y2="120.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="65.5" y="115.0903">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255" x="78.5" y="115.0903">Anfrage: Verordnungsdaten übermitteln</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="149.2891" y2="149.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="149.2891" y2="162.2891"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="162.2891" y2="162.2891"/><polygon fill="#1E90FF" points="361.5,158.2891,351.5,162.2891,361.5,166.2891,357.5,162.2891" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="144.2231">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="495" x="370.5" y="144.2231">Durchführen der standardmäßigen Workflow-Logik des E-Rezept-Fachdienstes</text><polygon fill="#1E90FF" points="69.5,187.4219,59.5,191.4219,69.5,195.4219,65.5,191.4219" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="63.5" x2="349.5" y1="191.4219" y2="191.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="75.5" y="186.356">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="88.5" y="186.356">Antwort: Erfolg</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="235.6875" y2="235.6875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="235.6875" y2="248.6875"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="248.6875" y2="248.6875"/><polygon fill="#1E90FF" points="361.5,244.6875,351.5,248.6875,361.5,252.6875,357.5,248.6875" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="223.0552">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="372" x="370.5" y="215.4888">Persistieren der Verordnungsdaten in einer Warteschlange</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="203" x="370.5" y="230.6216">für die asynchrone Übertragung</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="951" x="248" y="256.6875"/><path d="M248,256.6875 L314,256.6875 L314,263.6875 L304,273.6875 L248,273.6875 L248,256.6875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="261" y="270.7544">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="619" x="414" y="288.8262">Lokalisierung der Service-Endpunkte der ePA und der Akte eines Versicherten (s. Abschn. 4.1, 4.2)</text><polygon fill="#1E90FF" points="1091.5,317.9219,1101.5,321.9219,1091.5,325.9219,1095.5,321.9219" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="1097.5" y1="321.9219" y2="321.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="316.856">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="402" x="370.5" y="316.856">Anfrage: Widerspruchsinformationen zu Versorgungsprozessen</text><polygon fill="#1E90FF" points="361.5,347.0547,351.5,351.0547,361.5,355.0547,357.5,351.0547" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="355.5" x2="1102.5" y1="351.0547" y2="351.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="367.5" y="345.9888">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="380.5" y="345.9888">Antwort: Widerspruchsinformationen</text><path d="M231,366.0547 L295,366.0547 L295,373.1875 L285,383.1875 L231,383.1875 L231,366.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="450.5" style="stroke:#000000;stroke-width:1.5;" width="1389.5" x="231" y="366.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="246" y="379.1216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="366" x="310" y="378.2651">[Widerspruch zum Versorgungsprozess dgMP vorhanden]</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="404.3203" y2="404.3203"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="404.3203" y2="417.3203"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="417.3203" y2="417.3203"/><polygon fill="#1E90FF" points="361.5,413.3203,351.5,417.3203,361.5,421.3203,357.5,417.3203" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="399.2544">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="412" x="370.5" y="399.2544">Abbruch. Löschen der Verordnungsdaten aus der Warteschlange</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="231" x2="1620.5" y1="426.3203" y2="426.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="327" x="236" y="436.5308">[Kein Widerspruch zum Versorgungsprozess dgMP]</text><rect fill="none" height="39.1016" style="stroke:#000000;stroke-width:1.5;" width="1126" x="248" y="440.125"/><path d="M248,440.125 L314,440.125 L314,447.125 L304,457.125 L248,457.125 L248,440.125 " fill="#EEEEEE" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="261" y="454.1919">ref</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="344" x="639" y="472.2637">Login in die Akte des Versicherten (siehe. Abschn. 4.3)</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="505.3594" y2="505.3594"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="505.3594" y2="518.3594"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="518.3594" y2="518.3594"/><polygon fill="#1E90FF" points="361.5,514.3594,351.5,518.3594,361.5,522.3594,357.5,518.3594" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="500.2935">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="726" x="370.5" y="500.2935">Erzeugen des verordnungsweiten Business Identifer rxPrescriptionProcessIdentifier (PrescriptionID + YYYY-MM-DD)</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="562.625" y2="562.625"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="562.625" y2="575.625"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="575.625" y2="575.625"/><polygon fill="#1E90FF" points="361.5,571.625,351.5,575.625,361.5,579.625,357.5,575.625" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="357.5" y="549.9927">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="568" x="370.5" y="542.4263">Erzeugen der FHIR-Ressourcen MedicationRequest, Medication, Practitioner, Organization</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="473" x="370.5" y="557.5591">auf Grundlage der Verordnungsdaten sowie rxPrescriptionProcessIdentifier</text><polygon fill="#1E90FF" points="1460.5,600.7578,1470.5,604.7578,1460.5,608.7578,1464.5,604.7578" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="1466.5" y1="604.7578" y2="604.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="599.6919">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="509" x="379.5" y="599.6919">Übermittlung der erzeugten FHIR-Ressourcen als FHIR Operation per HTTP POST</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1472.5" x2="1514.5" y1="649.0234" y2="649.0234"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1514.5" x2="1514.5" y1="649.0234" y2="662.0234"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="1473.5" x2="1514.5" y1="662.0234" y2="662.0234"/><polygon fill="#1E90FF" points="1483.5,658.0234,1473.5,662.0234,1483.5,666.0234,1479.5,662.0234" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1479.5" y="636.3911">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1501.5" y="628.8247">FHIR-Ressourcen</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1501.5" y="643.9575">persistieren</text><path d="M241,677.0234 L305,677.0234 L305,684.1563 L295,694.1563 L241,694.1563 L241,677.0234 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.5313" style="stroke:#000000;stroke-width:1.5;" width="1333" x="241" y="677.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="256" y="690.0903">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="112" x="320" y="689.2339">[successful case]</text><polygon fill="#1E90FF" points="361.5,711.2891,351.5,715.2891,361.5,719.2891,357.5,715.2891" style="stroke:#1E90FF;stroke-width:1.0;"/><line style="stroke:#1E90FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="355.5" x2="1471.5" y1="715.2891" y2="715.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="367.5" y="710.2231">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="389.5" y="710.2231">Antwort: Transaktion erfolgreich</text><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="744.4219" y2="744.4219"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="744.4219" y2="757.4219"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="757.4219" y2="757.4219"/><polygon fill="#1E90FF" points="361.5,753.4219,351.5,757.4219,361.5,761.4219,357.5,757.4219" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="739.356">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="351" x="379.5" y="739.356">Löschen der Verordnungsdaten aus der Warteschlange</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="241" x2="1574" y1="766.4219" y2="766.4219"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="350.5" x2="392.5" y1="788.5547" y2="788.5547"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="392.5" x2="392.5" y1="788.5547" y2="801.5547"/><line style="stroke:#1E90FF;stroke-width:1.0;" x1="351.5" x2="392.5" y1="801.5547" y2="801.5547"/><polygon fill="#1E90FF" points="361.5,797.5547,351.5,801.5547,361.5,805.5547,357.5,801.5547" style="stroke:#1E90FF;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="357.5" y="783.4888">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="583" x="379.5" y="783.4888">Abbruch. Die Verordnungsdaten bleiben in der Warteschlange für eine spätere Übertragung</text><!--MD5=[15f86d4005ea3a3d88cc2275931088da]
@startuml

skinparam Shadowing false
skinparam ParticipantPadding 20
skinparam BoxPadding 10

skinparam sequence {
    ArrowColor DodgerBlue
    ActorBorderColor DodgerBlue
    LifeLineBorderColor Blue

    ParticipantBackgroundColor #3483eb
    ParticipantBorderColor #3483eb
    ParticipantFontSize 14
    ParticipantFontColor White

    ActorBackgroundColor #3483eb
    ActorFontSize 14
    NoteBackgroundColor #3483eb
}

hide footbox
autonumber

participant "PVS/KIS" as PVS
participant "E-Rezept-Fachdienst" as ERFD

box "ePA-Aktensystem" #LightGray
    participant "Information Service" as IS
end box

box "ePA-Aktensystem / VAU" #Beige
    participant "VAU \nSession \nManagement" as VAU #eb5e34
    participant "Medication Service" as EPA
end box

PVS -> ERFD: Anfrage: Verordnungsdaten übermitteln
ERFD -> ERFD: Durchführen der standardmäßigen Workflow-Logik des E-Rezept-Fachdienstes
ERFD - -> PVS: Antwort: Erfolg

ERFD -> ERFD: Persistieren der Verordnungsdaten in einer Warteschlange\nfür die asynchrone Übertragung

ref over ERFD, IS: Lokalisierung der Service-Endpunkte der ePA und der Akte eines Versicherten (s. Abschn. 4.1, 4.2)

ERFD -> IS: Anfrage: Widerspruchsinformationen zu Versorgungsprozessen
IS - -> ERFD: Antwort: Widerspruchsinformationen

alt Widerspruch zum Versorgungsprozess dgMP vorhanden
    ERFD -> ERFD: Abbruch. Löschen der Verordnungsdaten aus der Warteschlange
else Kein Widerspruch zum Versorgungsprozess dgMP

    ref over ERFD, VAU: Login in die Akte des Versicherten (siehe. Abschn. 4.3)

    ERFD -> ERFD: Erzeugen des verordnungsweiten Business Identifer rxPrescriptionProcessIdentifier (PrescriptionID + YYYY-MM-DD)
    ERFD -> ERFD: Erzeugen der FHIR-Ressourcen MedicationRequest, Medication, Practitioner, Organization\nauf Grundlage der Verordnungsdaten sowie rxPrescriptionProcessIdentifier
    ERFD -> EPA: Übermittlung der erzeugten FHIR-Ressourcen als FHIR Operation per HTTP POST
    EPA -> EPA: FHIR-Ressourcen\npersistieren

    alt successful case
        EPA - -> ERFD: Antwort: Transaktion erfolgreich
        ERFD -> ERFD: Löschen der Verordnungsdaten aus der Warteschlange
    else
        ERFD -> ERFD: Abbruch. Die Verordnungsdaten bleiben in der Warteschlange für eine spätere Übertragung
    end

end

@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>