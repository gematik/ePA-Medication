<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="613px" preserveAspectRatio="none" style="width:1043px;height:613px;background:#FFFFFF;" version="1.1" viewBox="0 0 1043 613" width="1043px" zoomAndPan="magnify"><defs/><g><rect fill="#87CEEB" height="26.2969" id="_title" style="stroke:#808080;stroke-width:1.0;" width="173" x="433.75" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="163" x="438.75" y="32.9951">$cancel-prescription</text><ellipse cx="593" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="none" height="428.9844" style="stroke:#000000;stroke-width:1.5;" width="1021.5" x="11" y="77.2969"/><path d="M98,77.2969 L98,86.5938 L88,96.5938 L11,96.5938 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="14" y="91.292">transaction</text><polygon fill="#F1F1F1" points="329,167.5625,857,167.5625,869,179.5625,857,191.5625,329,191.5625,317,179.5625,329,167.5625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="7" x="329" y="183.3706">If</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="340" y="183.3706">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="23" x="467" y="183.3706">with</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="494" y="183.3706">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="158" x="699" y="183.3706">exists in Medication Service</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="297" y="176.9683">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="869" y="176.9683">no</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="23" y="201.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="21" x="199" y="222.7012">Set</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="137" x="224" y="222.7012">MedicationRequest</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="365" y="222.7012">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="33" y="236.6699">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="358" y="236.6699">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="242.5" y="250.6387">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="67" x="304.5" y="250.6387">cancelled</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="23" y="298.4688"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="186.5" y="319.6074">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="144" x="229.5" y="319.6074">MedicationDispense</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="377.5" y="319.6074">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="33" y="333.5762">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="358" y="333.5762">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="242.5" y="347.5449">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="67" x="304.5" y="347.5449">cancelled</text><rect fill="#F1F1F1" height="61.9063" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="568" x="23" y="380.375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="39" x="219.5" y="401.5137">Set all</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="78" x="262.5" y="401.5137">Medication</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="50" x="344.5" y="401.5137">with the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="321" x="33" y="415.4824">extension[RxPrescriptionProcessIdentifier] equal to</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="358" y="415.4824">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="58" x="248.5" y="429.4512">to Status</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="55" x="310.5" y="429.4512">inactive</text><rect fill="#FFC0CB" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="247" x="755.5" y="201.5625"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="227" x="765.5" y="222.7012">Return "OperationOutcome (failure)"</text><ellipse cx="879" cy="280.5313" fill="none" rx="10" ry="10" style="stroke:#222222;stroke-width:1.5;"/><line style="stroke:#222222;stroke-width:2.5;" x1="872.8128" x2="885.1872" y1="274.3441" y2="286.7184"/><line style="stroke:#222222;stroke-width:2.5;" x1="885.1872" x2="872.8128" y1="274.3441" y2="286.7184"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="300" x="443" y="113.5938"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="53" x="453" y="134.7324">Get next</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacing" textLength="223" x="510" y="134.7324">RxPrescriptionProcessIdentifier</text><polygon fill="#F1F1F1" points="454,462.2813,732,462.2813,744,474.2813,732,486.2813,454,486.2813,442,474.2813,454,462.2813" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="14" x="597" y="496.4917">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="35" x="454" y="478.0894">If next</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201" x="493" y="478.0894">RxPrescriptionProcessIdentifier</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="698" y="478.0894">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="20" x="744" y="471.687">yes</text><rect fill="#98FB98" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="259" x="463.5" y="526.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="239" x="473.5" y="547.4199">Return "OperationOutcome (success)"</text><ellipse cx="593" cy="591.25" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="593" cy="591.25" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="307" y1="263.4688" y2="298.4688"/><polygon fill="#181818" points="303,288.4688,307,298.4688,311,288.4688,307,292.4688" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="307" y1="360.375" y2="380.375"/><polygon fill="#181818" points="303,370.375,307,380.375,311,370.375,307,374.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="879" x2="879" y1="235.5313" y2="270.5313"/><polygon fill="#181818" points="875,260.5313,879,270.5313,883,260.5313,879,264.5313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="317" x2="307" y1="179.5625" y2="179.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="307" y1="179.5625" y2="201.5625"/><polygon fill="#181818" points="303,191.5625,307,201.5625,311,191.5625,307,195.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="869" x2="879" y1="179.5625" y2="179.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="879" x2="879" y1="179.5625" y2="201.5625"/><polygon fill="#181818" points="875,191.5625,879,201.5625,883,191.5625,879,195.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="307" y1="442.2813" y2="447.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="307" x2="593" y1="447.2813" y2="447.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="447.2813" y2="462.2813"/><polygon fill="#181818" points="589,452.2813,593,462.2813,597,452.2813,593,456.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="147.5625" y2="167.5625"/><polygon fill="#181818" points="589,157.5625,593,167.5625,597,157.5625,593,161.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="744" x2="1016.5" y1="474.2813" y2="474.2813"/><polygon fill="#181818" points="1012.5,322.9297,1016.5,312.9297,1020.5,322.9297,1016.5,318.9297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1016.5" x2="1016.5" y1="130.5781" y2="474.2813"/><line style="stroke:#181818;stroke-width:1.0;" x1="1016.5" x2="743" y1="130.5781" y2="130.5781"/><polygon fill="#181818" points="753,126.5781,743,130.5781,753,134.5781,749,130.5781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="67.2969" y2="113.5938"/><polygon fill="#181818" points="589,103.5938,593,113.5938,597,103.5938,593,107.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="486.2813" y2="526.2813"/><polygon fill="#181818" points="589,516.2813,593,526.2813,597,516.2813,593,520.2813" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="593" x2="593" y1="560.25" y2="580.25"/><polygon fill="#181818" points="589,570.25,593,580.25,597,570.25,593,574.25" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[350d753b557a82d5b2a6f94915896253]
@startuml operation.cancel-prescription
skinparam defaultTextAlignment center
skinparam title {
  backgroundColor SkyBlue
  borderColor Gray
} 
title $cancel-prescription

start
partition transaction {
  repeat:Get next <b>RxPrescriptionProcessIdentifier</b>;

    if(If <b>MedicationRequest</b> with <b>RxPrescriptionProcessIdentifier</b> exists in Medication Service) then (yes)

          :Set <b>MedicationRequest</b> with the 
          extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
          to Status <b>cancelled</b>;

          :Set all <b>MedicationDispense</b> with the 
          extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
          to Status <b>cancelled</b>;

          :Set all <b>Medication</b> with the 
          extension[RxPrescriptionProcessIdentifier] equal to <b>RxPrescriptionProcessIdentifier</b>
          to Status <b>inactive</b>;

    else (no)

      #Pink:Return "OperationOutcome (failure)";
      end
    endif

  repeat while (If next <b>RxPrescriptionProcessIdentifier</b> exists) is (yes) not (no)
}
#palegreen:Return "OperationOutcome (success)";
stop
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>